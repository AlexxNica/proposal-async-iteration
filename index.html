<!doctype html>
<head><meta charset="utf-8">
<title>Async Generator Functions</title><script type="application/json" id="menu-search-biblio">{"clauses":{"sec-introduction":{"location":"","id":"sec-introduction","aoid":null,"title":"Introduction","number":"1"},"sec-async-generator-function-definitions":{"location":"","id":"sec-async-generator-function-definitions","aoid":null,"title":"Async Generator Function Definitions","number":"2"},"sec-asyncgenerator-definitions-evaluatebody":{"location":"","id":"sec-asyncgenerator-definitions-evaluatebody","aoid":null,"title":"Runtime Semantics: EvaluateBody","number":"2.1"},"sec-asyncgenerator-definitions-instantiatefunctionobject":{"location":"","id":"sec-asyncgenerator-definitions-instantiatefunctionobject","aoid":null,"title":"Runtime Semantics: InstantiateFunctionObject","number":"2.2"},"sec-asyncgenerator-definitions-propertydefinitionevaluation":{"location":"","id":"sec-asyncgenerator-definitions-propertydefinitionevaluation","aoid":null,"title":"Runtime Semantics: PropertyDefinitionEvaluation","number":"2.3"},"sec-asyncgenerator-definitions-evaluation":{"location":"","id":"sec-asyncgenerator-definitions-evaluation","aoid":null,"title":"Runtime Semantics: Evaluation","number":"2.4"},"sec-for-await-statement":{"location":"","id":"sec-for-await-statement","aoid":null,"title":"The `for-await` Statement","number":"3"},"sec-for-await-labelledevaluation":{"location":"","id":"sec-for-await-labelledevaluation","aoid":null,"title":"Runtime Semantics: LabelledEvaluation","number":"3.1"},"sec-forinofheadevaluation":{"location":"","id":"sec-forinofheadevaluation","aoid":null,"title":"Runtime Semantics: ForIn/OfHeadEvaluation ( _TDZnames_, _expr_, _iterationKind_ )","number":"3.2"},"sec-forinofbodyevaluation":{"location":"","id":"sec-forinofbodyevaluation","aoid":null,"title":"Runtime Semantics: ForIn/OfBodyEvaluation ( _lhs_, _stmt_, _iterator_, _lhsKind_, _labelSet_, _iteratorKind_ )","number":"3.3"},"sec-operations-on-iterator-objects":{"location":"","id":"sec-operations-on-iterator-objects","aoid":null,"title":"Operations on Iterator Objects","number":"4"},"sec-getasynciterator":{"location":"","id":"sec-getasynciterator","aoid":"GetAsyncIterator","title":"GetAsyncIterator ( _obj_ )","number":"4.1"},"sec-iteratorclose":{"location":"","id":"sec-iteratorclose","aoid":"IteratorClose","title":"IteratorClose( _iterator_, _completion_, _iteratorKind_ )","number":"4.2"},"sec-awaititerresultobject":{"location":"","id":"sec-awaititerresultobject","aoid":"AwaitIterResultObject","title":"AwaitIterResultObject ( _asyncResult_ )","number":"4.3"},"sec-iteration":{"location":"","id":"sec-iteration","aoid":null,"title":"Iteration","number":"5"},"sec-common-iteration-interfaces":{"location":"","id":"sec-common-iteration-interfaces","aoid":null,"title":"Common Iteration Interfaces","number":"5.1"},"sec-asynciterable-interface":{"location":"","id":"sec-asynciterable-interface","aoid":null,"title":"The AsyncIterable Interface","number":"5.1.1"},"sec-asynciterator-interface":{"location":"","id":"sec-asynciterator-interface","aoid":null,"title":"The AsyncIterator Interface","number":"5.1.2"},"sec-asynciteratorprototype":{"location":"","id":"sec-asynciteratorprototype","aoid":null,"title":"The %AsyncIteratorPrototype% Object","number":"5.2"},"sec-asynciteratorprototype-asynciterator":{"location":"","id":"sec-asynciteratorprototype-asynciterator","aoid":null,"title":"%AsyncIteratorPrototype% [ @@asyncIterator ] ( )","number":"5.2.1"},"":{"location":"","id":"","aoid":null,"title":"AsyncGenerator Objects","number":"7"},"sec-asyncgeneratorfunction-constructor":{"location":"","id":"sec-asyncgeneratorfunction-constructor","aoid":null,"title":"The AsyncGeneratorFunction Constructor","number":"6.1"},"sec-asyncgeneratorfunction":{"location":"","id":"sec-asyncgeneratorfunction","aoid":null,"title":"AsyncGeneratorFunction ( _p1_, _p2_, ..., _pn_, _body_ )","number":"6.1.1"},"sec-properties-of-asyncgeneratorfunction":{"location":"","id":"sec-properties-of-asyncgeneratorfunction","aoid":null,"title":"Properties of the AsyncGeneratorFunction Constructor","number":"6.2"},"sec-asyncgeneratorfunction-length":{"location":"","id":"sec-asyncgeneratorfunction-length","aoid":null,"title":"AsyncGeneratorFunction.length","number":"6.2.1"},"sec-asyncgeneratorfunction-prototype":{"location":"","id":"sec-asyncgeneratorfunction-prototype","aoid":null,"title":"AsyncGeneratorFunction.prototype","number":"6.2.2"},"sec-properties-of-asyncgeneratorfunction-prototype":{"location":"","id":"sec-properties-of-asyncgeneratorfunction-prototype","aoid":null,"title":"Properties of the AsyncGeneratorFunction Prototype Object","number":"6.3"},"sec-asyncgeneratorfunction-prototype-constructor":{"location":"","id":"sec-asyncgeneratorfunction-prototype-constructor","aoid":null,"title":"AsyncGeneratorFunction.prototype.constructor","number":"6.3.1"},"sec-asyncgeneratorfunction-prototype-prototype":{"location":"","id":"sec-asyncgeneratorfunction-prototype-prototype","aoid":null,"title":"AsyncGeneratorFunction.prototype.prototype","number":"6.3.2"},"sec-asyncgeneratorfunction-prototype-tostringtag":{"location":"","id":"sec-asyncgeneratorfunction-prototype-tostringtag","aoid":null,"title":"AsyncGeneratorFunction.prototype [ @@toStringTag ]","number":"6.3.3"},"sec-asyncgeneratorfunction-instances":{"location":"","id":"sec-asyncgeneratorfunction-instances","aoid":null,"title":"AsyncGeneratorFunction Instances","number":"6.4"},"sec-asyncgeneratorfunction-instance-length":{"location":"","id":"sec-asyncgeneratorfunction-instance-length","aoid":null,"title":"length","number":"6.4.1"},"sec-asyncgeneratorfunction-instance-name":{"location":"","id":"sec-asyncgeneratorfunction-instance-name","aoid":null,"title":"name","number":"6.4.2"},"sec-asyncgeneratorfunction-instance-prototype":{"location":"","id":"sec-asyncgeneratorfunction-instance-prototype","aoid":null,"title":"prototype","number":"6.4.3"},"sec-properties-of-asyncgenerator-prototype":{"location":"","id":"sec-properties-of-asyncgenerator-prototype","aoid":null,"title":"Properties of AsyncGenerator Prototype","number":"7.1"},"sec-asyncgenerator-prototype-constructor":{"location":"","id":"sec-asyncgenerator-prototype-constructor","aoid":null,"title":"AsyncGenerator.prototype.constructor","number":"7.1.1"},"sec-asyncgenerator-prototype-next":{"location":"","id":"sec-asyncgenerator-prototype-next","aoid":null,"title":"AsyncGenerator.prototype.next ( _value_ )","number":"7.1.2"},"sec-asyncgenerator-prototype-return":{"location":"","id":"sec-asyncgenerator-prototype-return","aoid":null,"title":"AsyncGenerator.prototype.return ( _value_ )","number":"7.1.3"},"sec-asyncgenerator-prototype-throw":{"location":"","id":"sec-asyncgenerator-prototype-throw","aoid":null,"title":"AsyncGenerator.prototype.throw ( _exception_ )","number":"7.1.4"},"sec-asyncgenerator-prototype-tostringtag":{"location":"","id":"sec-asyncgenerator-prototype-tostringtag","aoid":null,"title":"AsyncGenerator.prototype [ @@toStringTag ]","number":"7.1.5"},"sec-properties-of-asyncgenerator-intances":{"location":"","id":"sec-properties-of-asyncgenerator-intances","aoid":null,"title":"Properties of AsyncGenerator Instances","number":"7.2"},"sec-asyncgenerator-abstract-operations":{"location":"","id":"sec-asyncgenerator-abstract-operations","aoid":null,"title":"AsyncGenerator Abstract Operations","number":"7.3"},"sec-asyncgeneratorfunctioncreate":{"location":"","id":"sec-asyncgeneratorfunctioncreate","aoid":"AsyncGeneratorFunctionCreate","title":"AsyncGeneratorFunctionCreate (_kind_, _ParameterList_, _Body_, _Scope_, _Strict_)","number":"7.3.1"},"sec=asyncgeneratorrequest-records":{"location":"","id":"sec=asyncgeneratorrequest-records","aoid":null,"title":"AsyncGeneratorRequest Records","number":"7.3.2"},"sec-getgeneratorcontextkind":{"location":"","id":"sec-getgeneratorcontextkind","aoid":"GetGeneratorContextKind","title":"GetGeneratorContextKind","number":"7.3.3"},"sec-asyncgeneratorstart":{"location":"","id":"sec-asyncgeneratorstart","aoid":"AsyncGeneratorStart","title":"AsyncGeneratorStart ( _generator_, _generatorBody_ )","number":"7.3.4"},"sec-asyncgeneratorfulfill":{"location":"","id":"sec-asyncgeneratorfulfill","aoid":"AsyncGeneratorFulfill","title":"AsyncGeneratorFulfill ( _generator_, _iteratorResult_ )","number":"7.3.5"},"sec-asyncgeneratorreject":{"location":"","id":"sec-asyncgeneratorreject","aoid":"AsyncGeneratorReject","title":"AsyncGeneratorReject ( _generator_, _exception_ )","number":"7.3.6"},"sec-asyncgeneratorresumenext":{"location":"","id":"sec-asyncgeneratorresumenext","aoid":"AsyncGeneratorResumeNext","title":"AsyncGeneratorResumeNext ( _generator_ )","number":"7.3.7"},"sec-asyncgeneratorenqueue":{"location":"","id":"sec-asyncgeneratorenqueue","aoid":"AsyncGeneratorEnqueue","title":"AsyncGeneratorEnqueue ( _generator_, _completion_ )","number":"7.3.8"},"sec-asyncgeneratoryield":{"location":"","id":"sec-asyncgeneratoryield","aoid":"AsyncGeneratorYield","title":"AsyncGeneratorYield ( _iteratorResult_ )","number":"7.3.9"}},"ops":{"GetAsyncIterator":{"aoid":"GetAsyncIterator","id":"sec-getasynciterator","location":""},"IteratorClose":{"aoid":"IteratorClose","id":"sec-iteratorclose","location":""},"AwaitIterResultObject":{"aoid":"AwaitIterResultObject","id":"sec-awaititerresultobject","location":""},"AsyncGeneratorFunctionCreate":{"aoid":"AsyncGeneratorFunctionCreate","id":"sec-asyncgeneratorfunctioncreate","location":""},"GetGeneratorContextKind":{"aoid":"GetGeneratorContextKind","id":"sec-getgeneratorcontextkind","location":""},"AsyncGeneratorStart":{"aoid":"AsyncGeneratorStart","id":"sec-asyncgeneratorstart","location":""},"AsyncGeneratorFulfill":{"aoid":"AsyncGeneratorFulfill","id":"sec-asyncgeneratorfulfill","location":""},"AsyncGeneratorReject":{"aoid":"AsyncGeneratorReject","id":"sec-asyncgeneratorreject","location":""},"AsyncGeneratorResumeNext":{"aoid":"AsyncGeneratorResumeNext","id":"sec-asyncgeneratorresumenext","location":""},"AsyncGeneratorEnqueue":{"aoid":"AsyncGeneratorEnqueue","id":"sec-asyncgeneratorenqueue","location":""},"AsyncGeneratorYield":{"aoid":"AsyncGeneratorYield","id":"sec-asyncgeneratoryield","location":""}},"productions":{"prod-AsyncGeneratorMethod":{"id":"prod-AsyncGeneratorMethod","location":"","name":"AsyncGeneratorMethod"},"prod-AsyncGeneratorDeclaration":{"id":"prod-AsyncGeneratorDeclaration","location":"","name":"AsyncGeneratorDeclaration"},"prod-AsyncGeneratorExpression":{"id":"prod-AsyncGeneratorExpression","location":"","name":"AsyncGeneratorExpression"},"prod-AsyncGeneratorBody":{"id":"prod-AsyncGeneratorBody","location":"","name":"AsyncGeneratorBody"},"prod-YieldExpression":{"id":"prod-YieldExpression","location":"","name":"YieldExpression"},"prod-IterationStatement":{"id":"prod-IterationStatement","location":"","name":"IterationStatement"}},"terms":{},"examples":{},"notes":{},"tables":{"table-async-iterable":{"location":"","id":"table-async-iterable","number":1},"table-async-iterator-required":{"location":"","id":"table-async-iterator-required","number":2},"table-async-iterator-optional":{"location":"","id":"table-async-iterator-optional","number":3}},"figures":{}}</script></head><body><div id="menu-toggle">☰</div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-introduction" title="Introduction"><span class="secnum">1</span> Introduction</a></li><li><span class="item-toggle">◢</span><a href="#sec-async-generator-function-definitions" title="Async Generator Function Definitions"><span class="secnum">2</span> Async Generator Function Definitions</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-definitions-evaluatebody" title="Runtime Semantics: EvaluateBody"><span class="secnum">2.1</span> RS: EvaluateBody</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-definitions-instantiatefunctionobject" title="Runtime Semantics: InstantiateFunctionObject"><span class="secnum">2.2</span> RS: InstantiateFunctionObject</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-definitions-propertydefinitionevaluation" title="Runtime Semantics: PropertyDefinitionEvaluation"><span class="secnum">2.3</span> RS: PropertyDefinitionEvaluation</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-definitions-evaluation" title="Runtime Semantics: Evaluation"><span class="secnum">2.4</span> RS: Evaluation</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-for-await-statement" title="The `for-await` Statement"><span class="secnum">3</span> The <code>for-await</code> Statement</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-for-await-labelledevaluation" title="Runtime Semantics: LabelledEvaluation"><span class="secnum">3.1</span> RS: LabelledEvaluation</a></li><li><span class="item-toggle-none"></span><a href="#sec-forinofheadevaluation" title="Runtime Semantics: ForIn/OfHeadEvaluation ( _TDZnames_, _expr_, _iterationKind_ )"><span class="secnum">3.2</span> RS: ForIn/OfHeadEvaluation ( <var>TDZnames</var>, <var>expr</var>, <var>iterationKind</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-forinofbodyevaluation" title="Runtime Semantics: ForIn/OfBodyEvaluation ( _lhs_, _stmt_, _iterator_, _lhsKind_, _labelSet_, _iteratorKind_ )"><span class="secnum">3.3</span> RS: ForIn/OfBodyEvaluation ( <var>lhs</var>, <var>stmt</var>, <var>iterator</var>, <var>lhsKind</var>, <var>labelSet</var>, <var>iteratorKind</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-operations-on-iterator-objects" title="Operations on Iterator Objects"><span class="secnum">4</span> Operations on Iterator Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-getasynciterator" title="GetAsyncIterator ( _obj_ )"><span class="secnum">4.1</span> GetAsyncIterator ( <var>obj</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorclose" title="IteratorClose( _iterator_, _completion_, _iteratorKind_ )"><span class="secnum">4.2</span> IteratorClose( <var>iterator</var>, <var>completion</var>, <var>iteratorKind</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-awaititerresultobject" title="AwaitIterResultObject ( _asyncResult_ )"><span class="secnum">4.3</span> AwaitIterResultObject ( <var>asyncResult</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-iteration" title="Iteration"><span class="secnum">5</span> Iteration</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-common-iteration-interfaces" title="Common Iteration Interfaces"><span class="secnum">5.1</span> Common Iteration Interfaces</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asynciterable-interface" title="The AsyncIterable Interface"><span class="secnum">5.1.1</span> The AsyncIterable Interface</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciterator-interface" title="The AsyncIterator Interface"><span class="secnum">5.1.2</span> The AsyncIterator Interface</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-asynciteratorprototype" title="The %AsyncIteratorPrototype% Object"><span class="secnum">5.2</span> The %AsyncIteratorPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype-asynciterator" title="%AsyncIteratorPrototype% [ @@asyncIterator ] ( )"><span class="secnum">5.2.1</span> %AsyncIteratorPrototype% [ @@asyncIterator ] ( )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#" title="AsyncGeneratorFunction Objects"><span class="secnum">6</span> AsyncGeneratorFunction Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-asyncgeneratorfunction-constructor" title="The AsyncGeneratorFunction Constructor"><span class="secnum">6.1</span> The AsyncGeneratorFunction Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction" title="AsyncGeneratorFunction ( _p1_, _p2_, ..., _pn_, _body_ )"><span class="secnum">6.1.1</span> AsyncGeneratorFunction ( <var>p1</var>, <var>p2</var>, ..., <var>pn</var>, <var>body</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-asyncgeneratorfunction" title="Properties of the AsyncGeneratorFunction Constructor"><span class="secnum">6.2</span> Properties of the AsyncGeneratorFunction Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-length" title="AsyncGeneratorFunction.length"><span class="secnum">6.2.1</span> AsyncGeneratorFunction.length</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-prototype" title="AsyncGeneratorFunction.prototype"><span class="secnum">6.2.2</span> AsyncGeneratorFunction.prototype</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-asyncgeneratorfunction-prototype" title="Properties of the AsyncGeneratorFunction Prototype Object"><span class="secnum">6.3</span> Properties of the AsyncGeneratorFunction Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-prototype-constructor" title="AsyncGeneratorFunction.prototype.constructor"><span class="secnum">6.3.1</span> AsyncGeneratorFunction.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-prototype-prototype" title="AsyncGeneratorFunction.prototype.prototype"><span class="secnum">6.3.2</span> AsyncGeneratorFunction.prototype.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-prototype-tostringtag" title="AsyncGeneratorFunction.prototype [ @@toStringTag ]"><span class="secnum">6.3.3</span> AsyncGeneratorFunction.prototype [ @@toStringTag ]</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-asyncgeneratorfunction-instances" title="AsyncGeneratorFunction Instances"><span class="secnum">6.4</span> AsyncGeneratorFunction Instances</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-instance-length" title="length"><span class="secnum">6.4.1</span> length</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-instance-name" title="name"><span class="secnum">6.4.2</span> name</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunction-instance-prototype" title="prototype"><span class="secnum">6.4.3</span> prototype</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#" title="AsyncGenerator Objects"><span class="secnum">7</span> AsyncGenerator Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-properties-of-asyncgenerator-prototype" title="Properties of AsyncGenerator Prototype"><span class="secnum">7.1</span> Properties of AsyncGenerator Prototype</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-prototype-constructor" title="AsyncGenerator.prototype.constructor"><span class="secnum">7.1.1</span> AsyncGenerator.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-prototype-next" title="AsyncGenerator.prototype.next ( _value_ )"><span class="secnum">7.1.2</span> AsyncGenerator.prototype.next ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-prototype-return" title="AsyncGenerator.prototype.return ( _value_ )"><span class="secnum">7.1.3</span> AsyncGenerator.prototype.return ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-prototype-throw" title="AsyncGenerator.prototype.throw ( _exception_ )"><span class="secnum">7.1.4</span> AsyncGenerator.prototype.throw ( <var>exception</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-prototype-tostringtag" title="AsyncGenerator.prototype [ @@toStringTag ]"><span class="secnum">7.1.5</span> AsyncGenerator.prototype [ @@toStringTag ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-asyncgenerator-intances" title="Properties of AsyncGenerator Instances"><span class="secnum">7.2</span> Properties of AsyncGenerator Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-asyncgenerator-abstract-operations" title="AsyncGenerator Abstract Operations"><span class="secnum">7.3</span> AsyncGenerator Abstract Operations</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfunctioncreate" title="AsyncGeneratorFunctionCreate (_kind_, _ParameterList_, _Body_, _Scope_, _Strict_)"><span class="secnum">7.3.1</span> AsyncGeneratorFunctionCreate (<var>kind</var>, <var>ParameterList</var>, <var>Body</var>, <var>Scope</var>, <var>Strict</var>)</a></li><li><span class="item-toggle-none"></span><a href="#sec=asyncgeneratorrequest-records" title="AsyncGeneratorRequest Records"><span class="secnum">7.3.2</span> AsyncGeneratorRequest Records</a></li><li><span class="item-toggle-none"></span><a href="#sec-getgeneratorcontextkind" title="GetGeneratorContextKind"><span class="secnum">7.3.3</span> GetGeneratorContextKind</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorstart" title="AsyncGeneratorStart ( _generator_, _generatorBody_ )"><span class="secnum">7.3.4</span> AsyncGeneratorStart ( <var>generator</var>, <var>generatorBody</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorfulfill" title="AsyncGeneratorFulfill ( _generator_, _iteratorResult_ )"><span class="secnum">7.3.5</span> AsyncGeneratorFulfill ( <var>generator</var>, <var>iteratorResult</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorreject" title="AsyncGeneratorReject ( _generator_, _exception_ )"><span class="secnum">7.3.6</span> AsyncGeneratorReject ( <var>generator</var>, <var>exception</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorresumenext" title="AsyncGeneratorResumeNext ( _generator_ )"><span class="secnum">7.3.7</span> AsyncGeneratorResumeNext ( <var>generator</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratorenqueue" title="AsyncGeneratorEnqueue ( _generator_, _completion_ )"><span class="secnum">7.3.8</span> AsyncGeneratorEnqueue ( <var>generator</var>, <var>completion</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgeneratoryield" title="AsyncGeneratorYield ( _iteratorResult_ )"><span class="secnum">7.3.9</span> AsyncGeneratorYield ( <var>iteratorResult</var> )</a></li></ol></li></ol></li></ol></div></div><h1 class="version">Stage 0 Draft / December 31, 2015</h1><h1 class="title">Async Generator Functions</h1>
<script src="https://bterlson.github.io/ecmarkup/ecmarkup.js" defer=""></script>
<link rel="stylesheet" href="https://bterlson.github.io/ecmarkup/elements.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_light.min.css">

<emu-clause id="sec-introduction">
  <h1><span class="secnum">1</span>Introduction<span class="utils"><span class="anchor"><a href="#sec-introduction">#</a></span></span></h1>
  <emu-import href="./introduction.html"><p>This proposal adds syntactic support for asynchronous iteration using the  <i>AsyncIterable</i> and  <i>AsyncIterator</i> protocols.  It introduces a new  <i>IterationStatement</i>, "for-await", and adds syntax for creating async generator functions and methods.</p>

<p>See  <a href="https://github.com/zenparsing/async-iteration">the proposal repository</a> for background material and discussion.</p>

<emu-note><span class="note">Note 1</span>
  <p>This proposal depends upon the async functions proposal.</p>
</emu-note>

<emu-note><span class="note">Note 2</span>
  <p>This specification text does not include static semantics, which, for the most part, duplicate the existing static semantics for generator functions and for-of statements.

</p></emu-note></emu-import>
</emu-clause>

<emu-clause id="sec-async-generator-function-definitions">
  <h1><span class="secnum">2</span>Async Generator Function Definitions<span class="utils"><span class="anchor"><a href="#sec-async-generator-function-definitions">#</a></span></span></h1>
  <emu-import href="./definitions.html"><h2>Syntax</h2>
<emu-grammar><emu-production name="AsyncGeneratorMethod" params="Yield, Await" id="prod-AsyncGeneratorMethod">
    <emu-nt params="Yield, Await"><a href="#prod-AsyncGeneratorMethod">AsyncGeneratorMethod</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs a="8190b4cf"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>*</emu-t><emu-nt params="?Yield, ?Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-PropertyName">PropertyName</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt><emu-t>(</emu-t><emu-nt params="Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-StrictFormalParameters">StrictFormalParameters</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production>
<emu-production name="AsyncGeneratorDeclaration" params="Yield, Await, Default" id="prod-AsyncGeneratorDeclaration">
    <emu-nt params="Yield, Await, Default"><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a><emu-mods><emu-params>[Yield, Await, Default]</emu-params></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs a="c164fb32"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>function</emu-t><emu-t>*</emu-t><emu-nt params="?Yield, ?Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt><emu-t>(</emu-t><emu-nt params="Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
    <emu-rhs a="93de09ae" constraints="+Default"><emu-constraints>[+Default]</emu-constraints><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>function</emu-t><emu-t>*</emu-t><emu-t>(</emu-t><emu-nt params="Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production>
<emu-production name="AsyncGeneratorExpression" id="prod-AsyncGeneratorExpression">
    <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="26aef2fe"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>function</emu-t><emu-t>*</emu-t><emu-nt params="Yield, Await" optional=""><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a><emu-mods><emu-params>[Yield, Await]</emu-params><emu-opt>opt</emu-opt></emu-mods></emu-nt><emu-t>(</emu-t><emu-nt params="Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production>
<emu-production name="AsyncGeneratorBody" id="prod-AsyncGeneratorBody">
    <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="f831b2f9"><emu-nt params="Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FunctionBody">FunctionBody</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt></emu-rhs>
</emu-production></emu-grammar>
<emu-note><span class="note">Note 1</span>
  <p><emu-nt><a href="#prod-YieldExpression">YieldExpression</a></emu-nt> and <emu-nt>AwaitExpression</emu-nt> cannot be used within the <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt> of an async generator function because any expressions that are part of <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt> are evaluated before the resulting async generator object is in a resumable state.</p>
</emu-note>
<emu-note><span class="note">Note 2</span>
  <p>Abstract operations relating to async generator objects are defined in  <emu-xref href="#sec-asyncgenerator-abstract-operations"><a href="#sec-asyncgenerator-abstract-operations">7.3</a></emu-xref>.</p>
</emu-note>

<emu-clause id="sec-asyncgenerator-definitions-evaluatebody">
  <h1><span class="secnum">2.1</span>Runtime Semantics: EvaluateBody<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-definitions-evaluatebody">#</a></span></span></h1>
  <p>With parameters <var>functionObject</var> and <emu-xref href="#sec-list-and-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-list-and-record-specification-type">List</a></emu-xref> <var>argumentsList</var>.</p>
  <emu-grammar collapsed=""><emu-production name="AsyncGeneratorBody">
    <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="8aa65b90"><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FunctionBody">FunctionBody</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Perform ? <emu-xref aoid="FunctionDeclarationInstantiation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-functiondeclarationinstantiation">FunctionDeclarationInstantiation</a></emu-xref>(<var>functionObject</var>, <var>argumentsList</var>).</li><li>Let <var>generator</var> be ? <emu-xref aoid="OrdinaryCreateFromConstructor"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>functionObject</var>, <code>"%AsyncGeneratorPrototype%"</code>, « [[AsyncGeneratorState]], [[AsyncGeneratorContext]], [[AsyncGeneratorQueue]] »).</li><li>Perform ! <emu-xref aoid="AsyncGeneratorStart"><a href="#sec-asyncgeneratorstart">AsyncGeneratorStart</a></emu-xref>(<var>generator</var>, <var>FunctionBody</var>).</li><li>Return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>return</emu-const>, [[value]]: <var>generator</var>, [[target]]: <emu-const>empty</emu-const>}.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-asyncgenerator-definitions-instantiatefunctionobject">
  <h1><span class="secnum">2.2</span>Runtime Semantics: InstantiateFunctionObject<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-definitions-instantiatefunctionobject">#</a></span></span></h1>
  <p>With parameter <var>scope</var>.</p>
  <emu-grammar collapsed=""><emu-production name="AsyncGeneratorDeclaration">
    <emu-nt><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="cd06baed"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>function</emu-t><emu-t>*</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a></emu-nt><emu-t>(</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>If the function code for <emu-nt><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt> is <emu-xref href="#sec-strict-mode-code"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-strict-mode-code">strict mode code</a></emu-xref>, let <var>strict</var> be <emu-val>true</emu-val>. Otherwise let <var>strict</var> be <emu-val>false</emu-val>.</li><li>Let <var>name</var> be StringValue of <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a></emu-nt>.</li><li>Let <var>F</var> be <emu-xref aoid="AsyncGeneratorFunctionCreate"><a href="#sec-asyncgeneratorfunctioncreate">AsyncGeneratorFunctionCreate</a></emu-xref>(<emu-const>Normal</emu-const>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt>, <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt>, <var>scope</var>, <var>strict</var>).</li><li>Let <var>prototype</var> be <emu-xref aoid="ObjectCreate"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-objectcreate">ObjectCreate</a></emu-xref>(%AsyncGeneratorPrototype%).</li><li>Perform <emu-xref aoid="DefinePropertyOrThrow"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>F</var>, <code>"prototype"</code>, PropertyDescriptor{[[Value]]: <var>prototype</var>, [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val>}).</li><li>Perform <emu-xref aoid="SetFunctionName"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-setfunctionname">SetFunctionName</a></emu-xref>(<var>F</var>, <var>name</var>).</li><li>Return <var>F</var>.
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="AsyncGeneratorDeclaration">
    <emu-nt><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="905852d2"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>function</emu-t><emu-t>*</emu-t><emu-t>(</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>If the function code for <emu-nt><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt> is <emu-xref href="#sec-strict-mode-code"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-strict-mode-code">strict mode code</a></emu-xref>, let <var>strict</var> be <emu-val>true</emu-val>. Otherwise let <var>strict</var> be <emu-val>false</emu-val>.</li><li>Let <var>F</var> be <emu-xref aoid="AsyncGeneratorFunctionCreate"><a href="#sec-asyncgeneratorfunctioncreate">AsyncGeneratorFunctionCreate</a></emu-xref>(<emu-const>Normal</emu-const>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt>, <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt>, <var>scope</var>, <var>strict</var>).</li><li>Let <var>prototype</var> be <emu-xref aoid="ObjectCreate"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-objectcreate">ObjectCreate</a></emu-xref>(%AsyncGeneratorPrototype%).</li><li>Perform <emu-xref aoid="DefinePropertyOrThrow"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>F</var>, <code>"prototype"</code>, PropertyDescriptor{[[Value]]: <var>prototype</var>, [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val>}).</li><li>Perform <emu-xref aoid="SetFunctionName"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-setfunctionname">SetFunctionName</a></emu-xref>(<var>F</var>, <code>"default"</code>).</li><li>Return <var>F</var>.
  </li></ol></emu-alg>
  <emu-note><span class="note">Note</span>
    <p>An anonymous <emu-nt><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt> can only occur as part of an <code>export default</code> declaration.</p>
  </emu-note>
</emu-clause>

<emu-clause id="sec-asyncgenerator-definitions-propertydefinitionevaluation">
  <h1><span class="secnum">2.3</span>Runtime Semantics: PropertyDefinitionEvaluation<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-definitions-propertydefinitionevaluation">#</a></span></span></h1>
  <p>With parameter <var>object</var> and <var>enumerable</var>.</p>
  <emu-grammar collapsed=""><emu-production name="AsyncGeneratorMethod">
    <emu-nt><a href="#prod-AsyncGeneratorMethod">AsyncGeneratorMethod</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="85493ccc"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>*</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-PropertyName">PropertyName</a></emu-nt><emu-t>(</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-StrictFormalParameters">StrictFormalParameters</a></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>propKey</var> be the result of evaluating <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-PropertyName">PropertyName</a></emu-nt>.</li><li><emu-xref aoid="ReturnIfAbrupt"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>propKey</var>).</li><li>If the function code for this <emu-nt><a href="#prod-AsyncGeneratorMethod">AsyncGeneratorMethod</a></emu-nt> is <emu-xref href="#sec-strict-mode-code"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-strict-mode-code">strict mode code</a></emu-xref>, let <var>strict</var> be <emu-val>true</emu-val>. Otherwise let <var>strict</var> be <emu-val>false</emu-val>.</li><li>Let <var>scope</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment.</li><li>Let <var>closure</var> be <emu-xref aoid="AsyncGeneratorFunctionCreate"><a href="#sec-asyncgeneratorfunctioncreate">AsyncGeneratorFunctionCreate</a></emu-xref>(<emu-const>Method</emu-const>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-StrictFormalParameters">StrictFormalParameters</a></emu-nt>, <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt>, <var>scope</var>, <var>strict</var>).</li><li>Perform <emu-xref aoid="MakeMethod"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-makemethod">MakeMethod</a></emu-xref>(<var>closure</var>, <var>object</var>).</li><li>Let <var>prototype</var> be <emu-xref aoid="ObjectCreate"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-objectcreate">ObjectCreate</a></emu-xref>(%AsyncGeneratorPrototype%).</li><li>Perform <emu-xref aoid="DefinePropertyOrThrow"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>closure</var>, <code>"prototype"</code>, PropertyDescriptor{[[Value]]: <var>prototype</var>, [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val>}).</li><li>Perform <emu-xref aoid="SetFunctionName"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-setfunctionname">SetFunctionName</a></emu-xref>(<var>closure</var>, <var>propKey</var>).</li><li>Let <var>desc</var> be the <emu-xref href="#sec-property-descriptor-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-property-descriptor-specification-type">Property Descriptor</a></emu-xref>{[[Value]]: <var>closure</var>, [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <var>enumerable</var>, [[Configurable]]: <emu-val>true</emu-val>}.</li><li>Return ? <emu-xref aoid="DefinePropertyOrThrow"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>object</var>, <var>propKey</var>, <var>desc</var>).
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-asyncgenerator-definitions-evaluation">
  <h1><span class="secnum">2.4</span>Runtime Semantics: Evaluation<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-definitions-evaluation">#</a></span></span></h1>

  <emu-grammar collapsed=""><emu-production name="AsyncGeneratorExpression">
    <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="905852d2"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>function</emu-t><emu-t>*</emu-t><emu-t>(</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>If the function code for this <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt> is <emu-xref href="#sec-strict-mode-code"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-strict-mode-code">strict mode code</a></emu-xref>, let <var>strict</var> be <emu-val>true</emu-val>. Otherwise let <var>strict</var> be <emu-val>false</emu-val>.</li><li>Let <var>scope</var> be the LexicalEnvironment of the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Let <var>closure</var> be <emu-xref aoid="AsyncGeneratorFunctionCreate"><a href="#sec-asyncgeneratorfunctioncreate">AsyncGeneratorFunctionCreate</a></emu-xref>(<emu-const>Normal</emu-const>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt>, <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt>, <var>scope</var>, <var>strict</var>).</li><li>Let <var>prototype</var> be <emu-xref aoid="ObjectCreate"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-objectcreate">ObjectCreate</a></emu-xref>(%AsyncGeneratorPrototype%).</li><li>Perform <emu-xref aoid="DefinePropertyOrThrow"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>closure</var>, <code>"prototype"</code>, PropertyDescriptor{[[Value]]: <var>prototype</var>, [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val>}).</li><li>Return <var>closure</var>.
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="AsyncGeneratorExpression">
    <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="cd06baed"><emu-t>async</emu-t><emu-gann>[no <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LineTerminator">LineTerminator</a></emu-nt> here]</emu-gann><emu-t>function</emu-t><emu-t>*</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a></emu-nt><emu-t>(</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt><emu-t>)</emu-t><emu-t>{</emu-t><emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>If the function code for this <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt> is <emu-xref href="#sec-strict-mode-code"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-strict-mode-code">strict mode code</a></emu-xref>, let <var>strict</var> be <emu-val>true</emu-val>. Otherwise let <var>strict</var> be <emu-val>false</emu-val>.</li><li>Let <var>scope</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment.</li><li>Let <var>funcEnv</var> be <emu-xref aoid="NewDeclarativeEnvironment"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-newdeclarativeenvironment">NewDeclarativeEnvironment</a></emu-xref>(<var>scope</var>).</li><li>Let <var>envRec</var> be <var>funcEnv</var>'s <emu-xref href="#sec-lexical-environments"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-lexical-environments">EnvironmentRecord</a></emu-xref>.</li><li>Let <var>name</var> be StringValue of <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a></emu-nt>.</li><li>Perform <var>envRec</var>.CreateImmutableBinding(<var>name</var>).</li><li>Let <var>closure</var> be <emu-xref aoid="AsyncGeneratorFunctionCreate"><a href="#sec-asyncgeneratorfunctioncreate">AsyncGeneratorFunctionCreate</a></emu-xref>(<emu-const>Normal</emu-const>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-FormalParameters">FormalParameters</a></emu-nt>, <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt>, <var>funcEnv</var>, <var>strict</var>).</li><li>Let <var>prototype</var> be <emu-xref aoid="ObjectCreate"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-objectcreate">ObjectCreate</a></emu-xref>(%AsyncGeneratorPrototype%).</li><li>Perform <emu-xref aoid="DefinePropertyOrThrow"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>closure</var>, <code>"prototype"</code>, PropertyDescriptor{[[Value]]: <var>prototype</var>, [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val>}).</li><li>Perform <emu-xref aoid="SetFunctionName"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-setfunctionname">SetFunctionName</a></emu-xref>(<var>closure</var>, <var>name</var>).</li><li>Perform <var>envRec</var>.InitializeBinding(<var>name</var>, <var>closure</var>).</li><li>Return <var>closure</var>.
  </li></ol></emu-alg>
  <emu-note><span class="note">Note</span>
    <p>The <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a></emu-nt> in an <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt> can be referenced from inside the <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt>'s <emu-nt><a href="#prod-AsyncGeneratorBody">AsyncGeneratorBody</a></emu-nt> to allow the generator code to call itself recursively. However, unlike in an <emu-nt><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt>, the <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-BindingIdentifier">BindingIdentifier</a></emu-nt> in an <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt> cannot be referenced from and does not affect the scope enclosing the <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt>.</p>
  </emu-note>

  <emu-grammar collapsed=""><emu-production name="YieldExpression" id="prod-YieldExpression">
    <emu-nt><a href="#prod-YieldExpression">YieldExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="d1df3360"><emu-t>yield</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>resultObject</var> be <emu-xref aoid="CreateIterResultObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<emu-val>undefined</emu-val>, <emu-val>false</emu-val>).</li><li>If ! <emu-xref aoid="GetGeneratorContextKind"><a href="#sec-getgeneratorcontextkind">GetGeneratorContextKind</a></emu-xref>() is <emu-const>async</emu-const>, then<ol><li>TODO: For consistency, should we await here?  Kinda silly, but...</li><li>Return <emu-xref aoid="AsyncGeneratorYield"><a href="#sec-asyncgeneratoryield">AsyncGeneratorYield</a></emu-xref>(<var>resultObject</var>).</li></ol></li><li>Return <emu-xref aoid="GeneratorYield"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-generatoryield">GeneratorYield</a></emu-xref>(<var>resultObject</var>).
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="YieldExpression">
    <emu-nt><a href="#prod-YieldExpression">YieldExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="e741ede8"><emu-t>yield</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>exprRef</var> be the result of evaluating <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt>.</li><li>Let <var>value</var> be ? <emu-xref aoid="GetValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getvalue">GetValue</a></emu-xref>(<var>exprRef</var>).</li><li>If ! <emu-xref aoid="GetGeneratorContextKind"><a href="#sec-getgeneratorcontextkind">GetGeneratorContextKind</a></emu-xref>() is <emu-const>async</emu-const>, then<ol><li>Let <var>value</var> be ? AsyncFunctionAwait(<var>value</var>).</li><li>Return <emu-xref aoid="AsyncGeneratorYield"><a href="#sec-asyncgeneratoryield">AsyncGeneratorYield</a></emu-xref>(<emu-xref aoid="CreateIterResultObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>value</var>, <emu-val>false</emu-val>)).</li></ol></li><li>Return <emu-xref aoid="GeneratorYield"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-generatoryield">GeneratorYield</a></emu-xref>(<emu-xref aoid="CreateIterResultObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>value</var>, <emu-val>false</emu-val>)).
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="YieldExpression">
    <emu-nt><a href="#prod-YieldExpression">YieldExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="47a33813"><emu-t>yield</emu-t><emu-t>*</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>exprRef</var> be the result of evaluating <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt>.</li><li>Let <var>value</var> be ? <emu-xref aoid="GetValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getvalue">GetValue</a></emu-xref>(<var>exprRef</var>).</li><li>Let <var>iteratorKind</var> be ! <emu-xref aoid="GetGeneratorContextKind"><a href="#sec-getgeneratorcontextkind">GetGeneratorContextKind</a></emu-xref>().</li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, let <var>iterator</var> be ? <emu-xref aoid="GetAsyncIterator"><a href="#sec-getasynciterator">GetAsyncIterator</a></emu-xref>(<var>value</var>).</li><li>Else, let <var>iterator</var> be ? <emu-xref aoid="GetIterator"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getiterator">GetIterator</a></emu-xref>(<var>value</var>).</li><li>Let <var>received</var> be <emu-xref aoid="NormalCompletion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>undefined</emu-val>).</li><li>Repeat<ol><li>If <var>received</var>.[[type]] is <emu-const>normal</emu-const>, then<ol><li>Let <var>innerResult</var> be ? <emu-xref aoid="IteratorNext"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterator</var>, <var>received</var>.[[value]]).</li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, then<ol><li>Let <var>innerResult</var> be ? <emu-xref aoid="AwaitIterResultObject"><a href="#sec-awaititerresultobject">AwaitIterResultObject</a></emu-xref>(<var>innerResult</var>).</li></ol></li><li>Let <var>done</var> be ? <emu-xref aoid="IteratorComplete"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>innerResult</var>).</li><li>If <var>done</var> is <emu-val>true</emu-val>, then<ol><li>Return <emu-xref aoid="IteratorValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>innerResult</var>).</li></ol></li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, let <var>recieved</var> be <emu-xref aoid="AsyncGeneratorYield"><a href="#sec-asyncgeneratoryield">AsyncGeneratorYield</a></emu-xref>(<var>innerResult</var>).</li><li>Else, let <var>received</var> be <emu-xref aoid="GeneratorYield"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-generatoryield">GeneratorYield</a></emu-xref>(<var>innerResult</var>).</li></ol></li><li>Else if <var>received</var>.[[type]] is <emu-const>throw</emu-const>, then<ol><li>Let <var>throw</var> be ? <emu-xref aoid="GetMethod"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getmethod">GetMethod</a></emu-xref>(<var>iterator</var>, <code>"throw"</code>).</li><li>If <var>throw</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>innerResult</var> be ? <emu-xref aoid="Call"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-call">Call</a></emu-xref>(<var>throw</var>, <var>iterator</var>, « <var>received</var>.[[value]] »).</li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, then<ol><li>Let <var>innerResult</var> be ? <emu-xref aoid="AwaitIterResultObject"><a href="#sec-awaititerresultobject">AwaitIterResultObject</a></emu-xref>(<var>innerResult</var>).</li></ol></li><li>NOTE: Exceptions from the inner iterator <code>throw</code> method are propagated. Normal completions from an inner <code>throw</code> method are processed similarly to an inner <code>next</code>.</li><li>If <emu-xref aoid="Type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>innerResult</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>done</var> be ? <emu-xref aoid="IteratorComplete"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>innerResult</var>).</li><li>If <var>done</var> is <emu-val>true</emu-val>, then<ol><li>Let <var>value</var> be ? <emu-xref aoid="IteratorValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>innerResult</var>).</li><li>Return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>return</emu-const>, [[value]]: <var>value</var>, [[target]]: <emu-const>empty</emu-const>}.</li></ol></li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, let <var>recieved</var> be <emu-xref aoid="AsyncGeneratorYield"><a href="#sec-asyncgeneratoryield">AsyncGeneratorYield</a></emu-xref>(<var>innerResult</var>).</li><li>Else, let <var>received</var> be <emu-xref aoid="GeneratorYield"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-generatoryield">GeneratorYield</a></emu-xref>(<var>innerResult</var>).</li></ol></li><li>Else,<ol><li>NOTE: If <var>iterator</var> does not have a <code>throw</code> method, this throw is going to terminate the <code>yield*</code> loop. But first we need to give <var>iterator</var> a chance to clean up.</li><li>Let <var>closeResult</var> be ? <emu-xref aoid="IteratorClose"><a href="#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterator</var>, <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>normal</emu-const>, [[value]]: <emu-const>empty</emu-const>, [[target]]: <emu-const>empty</emu-const>}, <var>iteratorKind</var>).</li><li>NOTE: The next step throws a <emu-val>TypeError</emu-val> to indicate that there was a <code>yield*</code> protocol violation: <var>iterator</var> does not have a <code>throw</code> method.</li><li>Throw a <emu-val>TypeError</emu-val> exception.</li></ol></li></ol></li><li>Else,<ol><li>Assert: <var>received</var>.[[type]] is <emu-const>return</emu-const>.</li><li>Let <var>return</var> be ? <emu-xref aoid="GetMethod"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getmethod">GetMethod</a></emu-xref>(<var>iterator</var>, <code>"return"</code>).</li><li>If <var>return</var> is <emu-val>undefined</emu-val>, return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>received</var>).</li><li>Let <var>innerReturnResult</var> be ? <emu-xref aoid="Call"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-call">Call</a></emu-xref>(<var>return</var>, <var>iterator</var>, « <var>received</var>.[[value]] »).</li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, then<ol><li>Let <var>innerResult</var> be ? <emu-xref aoid="AwaitIterResultObject"><a href="#sec-awaititerresultobject">AwaitIterResultObject</a></emu-xref>(<var>innerResult</var>).</li></ol></li><li>If <emu-xref aoid="Type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>innerReturnResult</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>done</var> be ? <emu-xref aoid="IteratorComplete"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>innerReturnResult</var>).</li><li>If <var>done</var> is <emu-val>true</emu-val>, then<ol><li>Let <var>value</var> be ? <emu-xref aoid="IteratorValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>innerReturnResult</var>).</li><li>Return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>return</emu-const>, [[value]]: <var>value</var>, [[target]]: <emu-const>empty</emu-const>}.</li></ol></li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, let <var>recieved</var> be <emu-xref aoid="AsyncGeneratorYield"><a href="#sec-asyncgeneratoryield">AsyncGeneratorYield</a></emu-xref>(<var>innerResult</var>).</li><li>Else, let <var>received</var> be <emu-xref aoid="GeneratorYield"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-generatoryield">GeneratorYield</a></emu-xref>(<var>innerResult</var>).
  </li></ol></li></ol></li></ol></emu-alg>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="sec-for-await-statement">
  <h1><span class="secnum">3</span>The <code>for-await</code> Statement<span class="utils"><span class="anchor"><a href="#sec-for-await-statement">#</a></span></span></h1>
  <emu-import href="./for-await-statement.html"><emu-note><span class="note">Note</span>
  <p>The following definitions are added to section 13.7 (IterationStatements).</p>
</emu-note>

<h2>Syntax</h2>
<emu-grammar><emu-production name="IterationStatement" params="Yield, Return" id="prod-IterationStatement">
    <emu-nt params="Yield, Return"><a href="#prod-IterationStatement">IterationStatement</a><emu-mods><emu-params>[Yield, Return]</emu-params></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs a="628b3186"><emu-t>for</emu-t><emu-t>await</emu-t><emu-t>(</emu-t><emu-gann>[lookahead ≠ <emu-t>let</emu-t>]</emu-gann><emu-nt params="?Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LeftHandSideExpression">LeftHandSideExpression</a><emu-mods><emu-params>[?Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>of</emu-t><emu-nt params="In, ?Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a><emu-mods><emu-params>[In, ?Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t><emu-nt params="?Yield, ?Return, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a><emu-mods><emu-params>[?Yield, ?Return, Await]</emu-params></emu-mods></emu-nt></emu-rhs>
    <emu-rhs a="cd71d697"><emu-t>for</emu-t><emu-t>await</emu-t><emu-t>(</emu-t><emu-t>var</emu-t><emu-nt params="?Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForBinding">ForBinding</a><emu-mods><emu-params>[?Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>of</emu-t><emu-nt params="In, ?Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a><emu-mods><emu-params>[In, ?Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t><emu-nt params="?Yield, ?Return, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a><emu-mods><emu-params>[?Yield, ?Return, Await]</emu-params></emu-mods></emu-nt></emu-rhs>
    <emu-rhs a="d9c6dc32"><emu-t>for</emu-t><emu-t>await</emu-t><emu-t>(</emu-t><emu-nt params="?Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForDeclaration">ForDeclaration</a><emu-mods><emu-params>[?Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>of</emu-t><emu-nt params="In, ?Yield, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a><emu-mods><emu-params>[In, ?Yield, Await]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t><emu-nt params="?Yield, ?Return, Await"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a><emu-mods><emu-params>[?Yield, ?Return, Await]</emu-params></emu-mods></emu-nt></emu-rhs>
</emu-production></emu-grammar>

<emu-clause id="sec-for-await-labelledevaluation">
  <h1><span class="secnum">3.1</span>Runtime Semantics: LabelledEvaluation<span class="utils"><span class="anchor"><a href="#sec-for-await-labelledevaluation">#</a></span></span></h1>
  <emu-grammar collapsed=""><emu-production name="IterationStatement">
    <emu-nt><a href="#prod-IterationStatement">IterationStatement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="9a146e5f"><emu-t>for</emu-t><emu-t>await</emu-t><emu-t>(</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LeftHandSideExpression">LeftHandSideExpression</a></emu-nt><emu-t>of</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt><emu-t>)</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>keyResult</var> be the result of performing ? <emu-xref aoid="ForIn/OfHeadEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofheadevaluation-tdznames-expr-iterationkind">ForIn/OfHeadEvaluation</a></emu-xref>(« », <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt>, <emu-const>async-iterate</emu-const>).</li><li>Return ? <emu-xref aoid="ForIn/OfBodyEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset">ForIn/OfBodyEvaluation</a></emu-xref>(<emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LeftHandSideExpression">LeftHandSideExpression</a></emu-nt>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a></emu-nt>, <var>keyResult</var>, <emu-const>assignment</emu-const>, <var>labelSet</var>, <emu-const>async</emu-const>).
  </li></ol></emu-alg>
  <emu-grammar collapsed=""><emu-production name="IterationStatement">
    <emu-nt><a href="#prod-IterationStatement">IterationStatement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="7324ff96"><emu-t>for</emu-t><emu-t>await</emu-t><emu-t>(</emu-t><emu-t>var</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForBinding">ForBinding</a></emu-nt><emu-t>of</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt><emu-t>)</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>keyResult</var> be the result of performing ? <emu-xref aoid="ForIn/OfHeadEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofheadevaluation-tdznames-expr-iterationkind">ForIn/OfHeadEvaluation</a></emu-xref>(« », <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt>, <emu-const>async-iterate</emu-const>).</li><li>Return ? <emu-xref aoid="ForIn/OfBodyEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset">ForIn/OfBodyEvaluation</a></emu-xref>(<emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForBinding">ForBinding</a></emu-nt>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a></emu-nt>, <var>keyResult</var>, <emu-const>varBinding</emu-const>, <var>labelSet</var>, <emu-const>async</emu-const>).
  </li></ol></emu-alg>
  <emu-grammar collapsed=""><emu-production name="IterationStatement">
    <emu-nt><a href="#prod-IterationStatement">IterationStatement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="b80b6675"><emu-t>for</emu-t><emu-t>await</emu-t><emu-t>(</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForDeclaration">ForDeclaration</a></emu-nt><emu-t>of</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt><emu-t>)</emu-t><emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>keyResult</var> be the result of performing ? <emu-xref aoid="ForIn/OfHeadEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofheadevaluation-tdznames-expr-iterationkind">ForIn/OfHeadEvaluation</a></emu-xref>(BoundNames of <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForDeclaration">ForDeclaration</a></emu-nt>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentExpression">AssignmentExpression</a></emu-nt>, <emu-const>async-iterate</emu-const>).</li><li>Return ? <emu-xref aoid="ForIn/OfBodyEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset">ForIn/OfBodyEvaluation</a></emu-xref>(<emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForDeclaration">ForDeclaration</a></emu-nt>, <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-Statement">Statement</a></emu-nt>, <var>keyResult</var>, <emu-const>lexicalBinding</emu-const>, <var>labelSet</var>, <emu-const>async</emu-const>).
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-forinofheadevaluation">
  <h1><span class="secnum">3.2</span>Runtime Semantics: ForIn/OfHeadEvaluation ( <var>TDZnames</var>, <var>expr</var>, <var>iterationKind</var> )<span class="utils"><span class="anchor"><a href="#sec-forinofheadevaluation">#</a></span></span></h1>
  <p>The abstract operation <emu-xref aoid="ForIn/OfHeadEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofheadevaluation-tdznames-expr-iterationkind">ForIn/OfHeadEvaluation</a></emu-xref> is called with arguments <var>TDZnames</var>, <var>expr</var>, <var>iterationKind</var>, and <var>async</var>. The value of <var>iterationKind</var> is <emu-const>enumerate</emu-const>, <emu-const>iterate</emu-const>, or <emu-const>async-iterate</emu-const>.</p>
  <emu-alg><ol><li>Let <var>oldEnv</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment.</li><li>If <var>TDZnames</var> is not an empty <emu-xref href="#sec-list-and-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-list-and-record-specification-type">List</a></emu-xref>, then<ol><li>Assert: <var>TDZnames</var> has no duplicate entries.</li><li>Let <var>TDZ</var> be <emu-xref aoid="NewDeclarativeEnvironment"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-newdeclarativeenvironment">NewDeclarativeEnvironment</a></emu-xref>(<var>oldEnv</var>).</li><li>Let <var>TDZEnvRec</var> be <var>TDZ</var>'s <emu-xref href="#sec-lexical-environments"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-lexical-environments">EnvironmentRecord</a></emu-xref>.</li><li>For each string <var>name</var> in <var>TDZnames</var>, do<ol><li>Let <var>status</var> be <var>TDZEnvRec</var>.CreateMutableBinding(<var>name</var>, <emu-val>false</emu-val>).</li><li>Assert: <var>status</var> is never an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref>.</li></ol></li><li>Set the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment to <var>TDZ</var>.</li></ol></li><li>Let <var>exprRef</var> be the result of evaluating the production that is <var>expr</var>.</li><li>Set the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment to <var>oldEnv</var>.</li><li>Let <var>exprValue</var> be ? <emu-xref aoid="GetValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getvalue">GetValue</a></emu-xref>(<var>exprRef</var>).</li><li>If <var>iterationKind</var> is <emu-const>enumerate</emu-const>, then<ol><li>If <var>exprValue</var>.[[value]] is <emu-val>null</emu-val> or <emu-val>undefined</emu-val>, then<ol><li>Return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>break</emu-const>, [[value]]: <emu-const>empty</emu-const>, [[target]]: <emu-const>empty</emu-const>}.</li></ol></li><li>Let <var>obj</var> be <emu-xref aoid="ToObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-toobject">ToObject</a></emu-xref>(<var>exprValue</var>).</li><li>Return ? <var>obj</var>.[[Enumerate]]().</li></ol></li><li>Else, if <var>iterationKind</var> is <emu-const>async-iterate</emu-const>, then<ol><li>Return ? <emu-xref aoid="GetAsyncIterator"><a href="#sec-getasynciterator">GetAsyncIterator</a></emu-xref>(<var>exprValue</var>).</li></ol></li><li>Else,<ol><li>Assert: <var>iterationKind</var> is <emu-const>iterate</emu-const>.</li><li>Return ? <emu-xref aoid="GetIterator"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getiterator">GetIterator</a></emu-xref>(<var>exprValue</var>).
  </li></ol></li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-forinofbodyevaluation">
  <h1><span class="secnum">3.3</span>Runtime Semantics: ForIn/OfBodyEvaluation ( <var>lhs</var>, <var>stmt</var>, <var>iterator</var>, <var>lhsKind</var>, <var>labelSet</var>, <var>iteratorKind</var> )<span class="utils"><span class="anchor"><a href="#sec-forinofbodyevaluation">#</a></span></span></h1>
  <p>The abstract operation <emu-xref aoid="ForIn/OfBodyEvaluation"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset">ForIn/OfBodyEvaluation</a></emu-xref> is called with arguments <var>lhs</var>, <var>stmt</var>, <var>iterator</var>, <var>lhsKind</var>, <var>labelSet</var>, and optional argument <var>iteratorKind</var>. The value of <var>lhsKind</var> is either <emu-const>assignment</emu-const>, <emu-const>varBinding</emu-const> or <emu-const>lexicalBinding</emu-const>.  The value of <var>iteratorKind</var> is either <emu-const>normal</emu-const> or <emu-const>async</emu-const>.</p>
  <emu-alg><ol><li>If <var>iteratorKind</var> was not passed, let <var>iteratorKind</var> be <emu-const>normal</emu-const>.</li><li>Let <var>oldEnv</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment.</li><li>Let <var>V</var> be <emu-val>undefined</emu-val>.</li><li>Let <var>destructuring</var> be IsDestructuring of <var>lhs</var>.</li><li>If <var>destructuring</var> is <emu-val>true</emu-val> and if <var>lhsKind</var> is <emu-const>assignment</emu-const>, then<ol><li>Assert: <var>lhs</var> is a <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-LeftHandSideExpression">LeftHandSideExpression</a></emu-nt>.</li><li>Let <var>assignmentPattern</var> be the parse of the source text corresponding to <var>lhs</var> using <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-AssignmentPattern">AssignmentPattern</a></emu-nt> as the goal symbol.</li></ol></li><li>Repeat<ol><li>Let <var>nextResult</var> be ? <emu-xref aoid="IteratorNext"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterator</var>).</li><li>If <var>iteratorKind</var> is <emu-const>async</emu-const>, then<ol><li>Let <var>nextResult</var> be ? <emu-xref aoid="AwaitIterResultObject"><a href="#sec-awaititerresultobject">AwaitIterResultObject</a></emu-xref>(<var>nextResult</var>).</li></ol></li><li>Let <var>done</var> be ? <emu-xref aoid="IteratorComplete"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>iterator</var>).</li><li>If <var>done</var> is <emu-val>true</emu-val>, return <emu-xref aoid="NormalCompletion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>V</var>).</li><li>Let <var>nextValue</var> be ? <emu-xref aoid="IteratorValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>nextResult</var>).</li><li>If <var>lhsKind</var> is either <emu-const>assignment</emu-const> or <emu-const>varBinding</emu-const>, then<ol><li>If <var>destructuring</var> is <emu-val>false</emu-val>, then<ol><li>Let <var>lhsRef</var> be the result of evaluating <var>lhs</var> (it may be evaluated repeatedly).</li></ol></li></ol></li><li>Else,<ol><li>Assert: <var>lhsKind</var> is <emu-const>lexicalBinding</emu-const>.</li><li>Assert: <var>lhs</var> is a <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForDeclaration">ForDeclaration</a></emu-nt>.</li><li>Let <var>iterationEnv</var> be <emu-xref aoid="NewDeclarativeEnvironment"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-newdeclarativeenvironment">NewDeclarativeEnvironment</a></emu-xref>(<var>oldEnv</var>).</li><li>Perform BindingInstantiation for <var>lhs</var> passing <var>iterationEnv</var> as the argument.</li><li>Set the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment to <var>iterationEnv</var>.</li><li>If <var>destructuring</var> is <emu-val>false</emu-val>, then<ol><li>Assert: <var>lhs</var> binds a single name.</li><li>Let <var>lhsName</var> be the sole element of BoundNames of <var>lhs</var>.</li><li>Let <var>lhsRef</var> be <emu-xref aoid="ResolveBinding"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-resolvebinding">ResolveBinding</a></emu-xref>(<var>lhsName</var>).</li><li>Assert: <var>lhsRef</var> is not an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref>.</li></ol></li></ol></li><li>If <var>destructuring</var> is <emu-val>false</emu-val>, then<ol><li>If <var>lhsRef</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Let <var>status</var> be <var>lhsRef</var>.</li></ol></li><li>Else if <var>lhsKind</var> is <emu-const>lexicalBinding</emu-const>, then<ol><li>Let <var>status</var> be <emu-xref aoid="InitializeReferencedBinding"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-initializereferencedbinding">InitializeReferencedBinding</a></emu-xref>(<var>lhsRef</var>, <var>nextValue</var>).</li></ol></li><li>Else,<ol><li>Let <var>status</var> be <emu-xref aoid="PutValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-putvalue">PutValue</a></emu-xref>(<var>lhsRef</var>, <var>nextValue</var>).</li></ol></li></ol></li><li>Else,<ol><li>If <var>lhsKind</var> is <emu-const>assignment</emu-const>, then<ol><li>Let <var>status</var> be the result of performing DestructuringAssignmentEvaluation of <var>assignmentPattern</var> using <var>nextValue</var> as the argument.</li></ol></li><li>Else if <var>lhsKind</var> is <emu-const>varBinding</emu-const>, then<ol><li>Assert: <var>lhs</var> is a <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForBinding">ForBinding</a></emu-nt>.</li><li>Let <var>status</var> be the result of performing BindingInitialization for <var>lhs</var> passing <var>nextValue</var> and <emu-val>undefined</emu-val> as the arguments.</li></ol></li><li>Else,<ol><li>Assert: <var>lhsKind</var> is <emu-const>lexicalBinding</emu-const>.</li><li>Assert: <var>lhs</var> is a <emu-nt><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#prod-ForDeclaration">ForDeclaration</a></emu-nt>.</li><li>Let <var>status</var> be the result of performing BindingInitialization for <var>lhs</var> passing <var>nextValue</var> and <var>iterationEnv</var> as arguments.</li></ol></li></ol></li><li>If <var>status</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Set the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment to <var>oldEnv</var>.</li><li>Return ? <emu-xref aoid="IteratorClose"><a href="#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterator</var>, <var>status</var>, <var>iteratorKind</var>).</li></ol></li><li>Let <var>result</var> be the result of evaluating <var>stmt</var>.</li><li>Set the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>'s LexicalEnvironment to <var>oldEnv</var>.</li><li>If <emu-xref aoid="LoopContinues"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-loopcontinues">LoopContinues</a></emu-xref>(<var>result</var>, <var>labelSet</var>) is <emu-val>false</emu-val>, return ? <emu-xref aoid="IteratorClose"><a href="#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterator</var>, <emu-xref aoid="UpdateEmpty"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-updateempty">UpdateEmpty</a></emu-xref>(<var>result</var>, <var>V</var>), <var>iteratorKind</var>).</li><li>If <var>result</var>.[[value]] is not <emu-const>empty</emu-const>, let <var>V</var> be <var>result</var>.[[value]].
  </li></ol></li></ol></emu-alg>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="sec-operations-on-iterator-objects">
  <h1><span class="secnum">4</span>Operations on Iterator Objects<span class="utils"><span class="anchor"><a href="#sec-operations-on-iterator-objects">#</a></span></span></h1>
  <emu-import href="./iterator-operations.html"><emu-note><span class="note">Note</span>
  <p>The following abstract operations are added to or replace the operations found in section 7.4 (Operations on Iterator Objects).</p>
</emu-note>

<emu-clause id="sec-getasynciterator" aoid="GetAsyncIterator">
  <h1><span class="secnum">4.1</span>GetAsyncIterator ( <var>obj</var> )<span class="utils"><span class="anchor"><a href="#sec-getasynciterator">#</a></span></span></h1>
  <p>The abstract operation GetAsyncIterator with argument <var>obj</var> performs the following steps:</p>
  <emu-alg><ol><li>Let <var>method</var> be ? <emu-xref aoid="GetMethod"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getmethod">GetMethod</a></emu-xref>(<var>obj</var>, @@asyncIterator).</li><li>If <var>method</var> is <emu-val>undefined</emu-val>, let <emu-val>method</emu-val> be ? <emu-xref aoid="GetMethod"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getmethod">GetMethod</a></emu-xref>(<var>obj</var>, @@iterator).</li><li>Let <var>iterator</var> be ? <emu-xref aoid="Call"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-call">Call</a></emu-xref>(<var>method</var>, <var>obj</var>).</li><li>If <emu-xref aoid="Type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>iterator</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>Return <var>iterator</var>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-iteratorclose" aoid="IteratorClose">
  <h1><span class="secnum">4.2</span>IteratorClose( <var>iterator</var>, <var>completion</var>, <var>iteratorKind</var> )<span class="utils"><span class="anchor"><a href="#sec-iteratorclose">#</a></span></span></h1>
  <p>The abstract operation IteratorClose with arguments <var>iterator</var> and <var>completion</var> and optional argument <var>iteratorKind</var> is used to notify an iterator that it should perform any actions it would normally perform when it has reached its completed state.  The value of <var>iteratorKind</var> is either <emu-const>normal</emu-const> or <emu-const>async</emu-const>.</p>
  <emu-alg><ol><li>Assert: <emu-xref aoid="Type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>iterator</var>) is Object.</li><li>Assert: <var>completion</var> is a <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref> Record.</li><li>If <var>iteratorKind</var> was not passed, let <var>iteratorKind</var> be <emu-const>normal</emu-const>.</li><li>Let <var>return</var> be ? <emu-xref aoid="GetMethod"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-getmethod">GetMethod</a></emu-xref>(<var>iterator</var>, <code>"return"</code>).</li><li>If <var>return</var> is <emu-val>undefined</emu-val>, then<ol><li>Return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>completion</var>).</li></ol></li><li>Let <var>innerResult</var> be <emu-xref aoid="Call"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-call">Call</a></emu-xref>(<var>return</var>, <var>iterator</var>, « »).</li><li>If <var>innerResult</var> is not an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref> and <var>iteratorKind</var> is <emu-const>async</emu-const>, then<ol><li>Let <var>innerResult</var> be <emu-xref aoid="AwaitIterResultObject"><a href="#sec-awaititerresultobject">AwaitIterResultObject</a></emu-xref>(<var>innerResult</var>).</li></ol></li><li>If <var>completion</var>.[[type]] is <emu-const>throw</emu-const>, return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>completion</var>).</li><li>If <var>innerResult</var>.[[type]] is <emu-const>throw</emu-const>, return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>innerResult</var>).</li><li>If <emu-xref aoid="Type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>innerResult</var>.[[value]]) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>Return <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>completion</var>).
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-awaititerresultobject" aoid="AwaitIterResultObject">
  <h1><span class="secnum">4.3</span>AwaitIterResultObject ( <var>asyncResult</var> )<span class="utils"><span class="anchor"><a href="#sec-awaititerresultobject">#</a></span></span></h1>
  <emu-alg><ol><li>Let <var>result</var> be ? AsyncFunctionAwait(<var>asyncResult</var>).</li><li>Let <var>value</var> be ? <emu-xref aoid="IteratorValue"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>result</var>).</li><li>If <emu-xref aoid="Type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>value</var>) is Object, then<ol><li>If ? <emu-xref aoid="IsCallable"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iscallable">IsCallable</a></emu-xref>(? <emu-xref aoid="Get"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-get-o-p">Get</a></emu-xref>(<var>value</var>, <code>"then"</code>)) is <emu-val>true</emu-val>, then<ol><li>Let <var>done</var> be ? <emu-xref aoid="IteratorComplete"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>result</var>).</li><li>Let <var>value</var> be ? AsyncFunctionAwait(<var>value</var>).</li><li>Let <var>result</var> be <emu-xref aoid="CreateIterResultObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>value</var>, <var>done</var>).</li></ol></li></ol></li><li>Return <var>result</var>.
  </li></ol></emu-alg>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="sec-iteration">
  <h1><span class="secnum">5</span>Iteration<span class="utils"><span class="anchor"><a href="#sec-iteration">#</a></span></span></h1>
  <emu-import href="./iteration.html"><emu-note><span class="note">Note</span>
  <p>The following definitions are added to section 5 (Iteration).</p>
</emu-note>

<emu-clause id="sec-common-iteration-interfaces">
  <h1><span class="secnum">5.1</span>Common Iteration Interfaces<span class="utils"><span class="anchor"><a href="#sec-common-iteration-interfaces">#</a></span></span></h1>

  <emu-clause id="sec-asynciterable-interface">
    <h1><span class="secnum">5.1.1</span>The  <i>AsyncIterable</i> Interface<span class="utils"><span class="anchor"><a href="#sec-asynciterable-interface">#</a></span></span></h1>
    <p>The  <i>AsyncIterable</i> interface includes the properties described in  <emu-xref href="#table-async-iterable"><a href="#table-async-iterable">Table 1</a></emu-xref>:</p>
    <emu-table id="table-async-iterable" caption="<i>AsyncIterable</i> Interface Required Properties"><figure><figcaption>Table 1: <i>AsyncIterable</i> Interface Required Properties</figcaption>
      <table>
        <tbody>
        <tr>
          <th>Property</th>
          <th>Value</th>
          <th>Requirements</th>
        </tr>
        <tr>
          <td><code>@@asyncIterator</code></td>
          <td>A function that returns an  <i>AsyncIterator</i> object.</td>
          <td>The returned object must conform to the  <i>AsyncIterator</i> interface.</td>
        </tr>
        </tbody>
      </table>
    </figure></emu-table>
  </emu-clause>

  <emu-clause id="sec-asynciterator-interface">
    <h1><span class="secnum">5.1.2</span>The  <i>AsyncIterator</i> Interface<span class="utils"><span class="anchor"><a href="#sec-asynciterator-interface">#</a></span></span></h1>
    <p>An object that implements the  <i>AsyncIterator</i> interface must include the properties in  <emu-xref href="#table-async-iterator-required"><a href="#table-async-iterator-required">Table 2</a></emu-xref>. Such objects may also implement the properties in  <emu-xref href="#table-async-iterator-optional"><a href="#table-async-iterator-optional">Table 3</a></emu-xref>.</p>
    <emu-table id="table-async-iterator-required" caption="<i>AsyncIterator</i> Interface Required Properties"><figure><figcaption>Table 2: <i>AsyncIterator</i> Interface Required Properties</figcaption>
      <table>
        <tbody>
        <tr>
          <th>Property</th>
          <th>Value</th>
          <th>Requirements</th>
        </tr>
        <tr>
          <td><code>next</code></td>
          <td>A function that returns a Promise for an  <i>IteratorResult</i> object.</td>
          <td>The returned Promise, when fulfilled, must wrap an object which conforms to the  <i>IteratorResult</i> interface. If a previous call to the <code>next</code> method of an  <i>AsyncIterator</i> has returned a Promise for an  <i>IteratorResult</i> object whose <code>done</code> property is <emu-val>true</emu-val>, then all subsequent calls to the <code>next</code> method of that object should also return a Promise for an  <i>IteratorResult</i> object whose <code>done</code> property is <emu-val>true</emu-val>. However, this requirement is not enforced.
          
          </td>
        </tr>
        </tbody>
      </table>
    </figure></emu-table>
    <emu-note><span class="note">Note 1</span>
      <p>Arguments may be passed to the next function but their interpretation and validity is dependent upon the target  <i>AsyncIterator</i>. The <code>for-await</code> statement and other common users of  <em>AsyncIterators</em> do not pass any arguments, so  <i>AsyncIterator</i> objects that expect to be used in such a manner must be prepared to deal with being called with no arguments.</p>
    </emu-note>
    <emu-table id="table-async-iterator-optional" caption="<i>AsyncIterator</i> Interface Optional Properties"><figure><figcaption>Table 3: <i>AsyncIterator</i> Interface Optional Properties</figcaption>
      <table>
        <tbody>
        <tr>
          <th>Property</th>
          <th>Value</th>
          <th>Requirements</th>
        </tr>
        <tr>
          <td><code>return</code></td>
          <td>A function that returns a Promise for an  <i>IteratorResult</i> object.</td>
          <td>The returned Promise, when fulfilled, must wrap an object which conforms to the  <i>IteratorResult</i> interface. Invoking this method notifies the  <i>AsyncIterator</i> object that the caller does not intend to make any more <code>next</code> method calls to the  <i>AsyncIterator</i>. The returned Promise will wrap an  <i>IteratorResult</i> object which will typically have a <code>done</code> property whose value is <emu-val>true</emu-val>, and a <code>value</code> property with the value passed as the argument of the <code>return</code> method. However, this requirement is not enforced.
          
          </td>
        </tr>
        <tr>
          <td><code>throw</code></td>
          <td>A function that returns a Promise for an  <i>IteratorResult</i> object.</td>
          <td>The returned Promise, when fulfilled, must wrap an object which conforms to the  <i>IteratorResult</i> interface. Invoking this method notifies the  <i>AsyncIterator</i> object that the caller has detected an error condition. The argument may be used to identify the error condition and typically will be an exception object. A typical response is to return a rejected Promise which wraps the value passed as the argument. If the returned Promise is fulfilled, the wrapped  <i>IteratorResult</i> object will typically have a <code>done</code> property whose value is <emu-val>true</emu-val>.
          
          </td>
        </tr>
        </tbody>
      </table>
    </figure></emu-table>
    <emu-note><span class="note">Note 2</span>
      <p>Typically callers of these methods should check for their existence before invoking them. Certain ECMAScript language features including <code>for-await</code> and <code>yield*</code> call these methods after performing an existence check.</p>
    </emu-note>
  </emu-clause>

</emu-clause>

<emu-clause id="sec-asynciteratorprototype">
  <h1><span class="secnum">5.2</span>The %AsyncIteratorPrototype% Object<span class="utils"><span class="anchor"><a href="#sec-asynciteratorprototype">#</a></span></span></h1>
  <p>The value of the [[Prototype]] internal slot of the %AsyncIteratorPrototype% object is the intrinsic object %ObjectPrototype% (<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-properties-of-the-object-prototype-object">19.1.3</a></emu-xref>). The %AsyncIteratorPrototype% object is an ordinary object. The initial value of the [[Extensible]] internal slot of the %AsyncIteratorPrototype% object is <emu-val>true</emu-val>.</p>
  <emu-note><span class="note">Note</span>
    <p>All objects defined in this specification that implement the AsyncIterator interface also inherit from %AsyncIteratorPrototype%. ECMAScript code may also define objects that inherit from %AsyncIteratorPrototype%.The %AsyncIteratorPrototype% object provides a place where additional methods that are applicable to all async iterator objects may be added.</p>
  </emu-note>

  <emu-clause id="sec-asynciteratorprototype-asynciterator">
    <h1><span class="secnum">5.2.1</span>%AsyncIteratorPrototype% [ @@asyncIterator ] ( )<span class="utils"><span class="anchor"><a href="#sec-asynciteratorprototype-asynciterator">#</a></span></span></h1>
    <p>The following steps are taken:</p>
    <emu-alg><ol><li>Return the <emu-val>this</emu-val> value.
    </li></ol></emu-alg>
    <p>The value of the <code>name</code> property of this function is <code>"[Symbol.asyncIterator]"</code>.</p>
  </emu-clause>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause sec="sec-asyncgeneratorfunction-objects">
  <h1><span class="secnum">6</span>AsyncGeneratorFunction Objects<span class="utils"><span class="anchor"><a href="#">#</a></span></span></h1>
  <emu-import href="./async-generator-function-objects.html"><p>AsyncGenerator Function objects are functions that are usually created by evaluating <emu-nt><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt>, <emu-nt><a href="#prod-AsyncGeneratorExpression">AsyncGeneratorExpression</a></emu-nt>, and <emu-nt><a href="#prod-AsyncGeneratorMethod">AsyncGeneratorMethod</a></emu-nt> syntactic productions. They may also be created by calling the %AsyncGeneratorFunction% intrinsic.</p>

<emu-clause id="sec-asyncgeneratorfunction-constructor">
  <h1><span class="secnum">6.1</span>The AsyncGeneratorFunction Constructor<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-constructor">#</a></span></span></h1>
  <p>The <code>AsyncGeneratorFunction</code> constructor is the %AsyncGeneratorFunction% intrinsic. When <code>AsyncGeneratorFunction</code> is called as a function rather than as a constructor, it creates and initializes a new AsyncGeneratorFunction object. Thus the function call <code>AsyncGeneratorFunction (...)</code> is equivalent to the object creation expression <code>new AsyncGeneratorFunction (...)</code> with the same arguments.</p>
  <p><code>AsyncGeneratorFunction</code> is designed to be subclassable. It may be used as the value of an <code>extends</code> clause of a class definition. Subclass constructors that intend to inherit the specified <code>AsyncGeneratorFunction</code> behaviour must include a <code>super</code> call to the <code>AsyncGeneratorFunction</code> constructor to create and initialize subclass instances with the internal slots necessary for built-in AsyncGeneratorFunction behaviour. All ECMAScript syntactic forms for defining async generator function objects create direct instances of <code>AsyncGeneratorFunction</code>. There is no syntactic means to create instances of <code>AsyncGeneratorFunction</code> subclasses.</p>

  <emu-clause id="sec-asyncgeneratorfunction">
    <h1><span class="secnum">6.1.1</span>AsyncGeneratorFunction ( <var>p1</var>, <var>p2</var>, ..., <var>pn</var>, <var>body</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction">#</a></span></span></h1>
    <p>The last argument specifies the body (executable code) of an async generator function; any preceding arguments specify formal parameters.</p>
    <p>When the <code>AsyncGeneratorFunction</code> function is called with some arguments <var>p1</var>, <var>p2</var>, … , <var>pn</var>, <var>body</var> (where <var>n</var> might be 0, that is, there are no "<var>p</var>" arguments, and where <var>body</var> might also not be provided), the following steps are taken:</p>
    <emu-alg><ol><li>Let <var>C</var> be the active function object.</li><li>Let <var>args</var> be the <var>argumentsList</var> that was passed to this function by [[Call]] or [[Construct]].</li><li>Return ? <emu-xref aoid="CreateDynamicFunction"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createdynamicfunction">CreateDynamicFunction</a></emu-xref>(<var>C</var>, NewTarget, <code>"async-generator"</code>, <var>args</var>).
    </li></ol></emu-alg>
    <emu-note><span class="note">Note</span>
      <p>See NOTE for  <emu-xref href="#sec-function-p1-p2-pn-body"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-function-p1-p2-pn-body">19.2.1.1</a></emu-xref>.</p>
    </emu-note>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-properties-of-asyncgeneratorfunction">
  <h1><span class="secnum">6.2</span>Properties of the AsyncGeneratorFunction Constructor<span class="utils"><span class="anchor"><a href="#sec-properties-of-asyncgeneratorfunction">#</a></span></span></h1>
  <p>The <code>AsyncGeneratorFunction</code> constructor is a standard built-in function object that inherits from the <code>Function</code> constructor. The value of the [[Prototype]] internal slot of the <code>AsyncGeneratorFunction</code> constructor is the intrinsic object %Function%.</p>
  <p>The value of the [[Extensible]] internal slot of the AsyncGeneratorFunction constructor is <emu-val>true</emu-val>.</p>
  <p>The value of the <code>name</code> property of the AsyncGeneratorFunction is <code>"AsyncGeneratorFunction"</code>.</p>
  <p>The <code>AsyncGeneratorFunction</code> constructor has the following properties:</p>

  <emu-clause id="sec-asyncgeneratorfunction-length">
    <h1><span class="secnum">6.2.1</span>AsyncGeneratorFunction.length<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-length">#</a></span></span></h1>
    <p>This is a data property with a value of 1. This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
  </emu-clause>

  <emu-clause id="sec-asyncgeneratorfunction-prototype">
    <h1><span class="secnum">6.2.2</span>AsyncGeneratorFunction.prototype<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-prototype">#</a></span></span></h1>
    <p>The initial value of <code>AsyncGeneratorFunction.prototype</code> is the intrinsic object %AsyncGenerator%.</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-properties-of-asyncgeneratorfunction-prototype">
  <h1><span class="secnum">6.3</span>Properties of the AsyncGeneratorFunction Prototype Object<span class="utils"><span class="anchor"><a href="#sec-properties-of-asyncgeneratorfunction-prototype">#</a></span></span></h1>
  <p>The AsyncGeneratorFunction prototype object is an ordinary object. It is not a function object and does not have an [[ECMAScriptCode]] internal slot or any other of the internal slots listed in (TODO: table-27 link) or (TODO: table link to AsyncGenerator internal slots). In addition to being the value of the prototype property of the %AsyncGeneratorFunction% intrinsic, it is the %AsyncGenerator% intrinsic.</p>
  <p>The value of the [[Prototype]] internal slot of the AsyncGeneratorFunction prototype object is the %FunctionPrototype% intrinsic object. The initial value of the [[Extensible]] internal slot of the AsyncGeneratorFunction prototype object is <emu-val>true</emu-val>.</p>

  <emu-clause id="sec-asyncgeneratorfunction-prototype-constructor">
    <h1><span class="secnum">6.3.1</span>AsyncGeneratorFunction.prototype.constructor<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-prototype-constructor">#</a></span></span></h1>
    <p>The initial value of <code>AsyncGeneratorFunction.prototype.constructor</code> is the intrinsic object %AsyncGeneratorFunction%.</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
  </emu-clause>

  <emu-clause id="sec-asyncgeneratorfunction-prototype-prototype">
    <h1><span class="secnum">6.3.2</span>AsyncGeneratorFunction.prototype.prototype<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-prototype-prototype">#</a></span></span></h1>
    <p>The value of <code>AsyncGeneratorFunction.prototype.prototype</code> is the %AsyncGeneratorPrototype% intrinsic object.</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
  </emu-clause>

  <emu-clause id="sec-asyncgeneratorfunction-prototype-tostringtag">
    <h1><span class="secnum">6.3.3</span>AsyncGeneratorFunction.prototype [ @@toStringTag ]<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-prototype-tostringtag">#</a></span></span></h1>
    <p>The initial value of the @@toStringTag property is the String value <code>"AsyncGeneratorFunction"</code>.</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-asyncgeneratorfunction-instances">
  <h1><span class="secnum">6.4</span>AsyncGeneratorFunction Instances<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-instances">#</a></span></span></h1>
  <p>Every AsyncGeneratorFunction instance is an ECMAScript function object and has the internal slots listed in (TODO: table-27 link). The value of the [[FunctionKind]] internal slot for all such instances is <code>"generator"</code>.</p>
  <p>Each AsyncGeneratorFunction instance has the following own properties:</p>

  <emu-clause id="sec-asyncgeneratorfunction-instance-length">
    <h1><span class="secnum">6.4.1</span>length<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-instance-length">#</a></span></span></h1>
    <p>The value of the <code>length</code> property is an integer that indicates the typical number of arguments expected by the AsyncGeneratorFunction. However, the language permits the function to be invoked with some other number of arguments. The behaviour of an AsyncGeneratorFunction when invoked on a number of arguments other than the number specified by its <code>length</code> property depends on the function.</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
  </emu-clause>

  <emu-clause id="sec-asyncgeneratorfunction-instance-name">
    <h1><span class="secnum">6.4.2</span>name<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-instance-name">#</a></span></span></h1>
    <p>The specification for the <code>name</code> property of Function instances given in  <emu-xref href="#sec-function-instances-name"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-function-instances-name">19.2.4.2</a></emu-xref> also applies to AsyncGeneratorFunction instances.</p>
  </emu-clause>

  <emu-clause id="sec-asyncgeneratorfunction-instance-prototype">
    <h1><span class="secnum">6.4.3</span>prototype<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunction-instance-prototype">#</a></span></span></h1>
    <p>Whenever an AsyncGeneratorFunction instance is created another ordinary object is also created and is the initial value of the async generator function's <code>prototype</code> property. The value of the prototype property is used to initialize the [[Prototype]] internal slot of a newly created AsyncGenerator object when the generator function object is invoked using [[Call]].</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
    <emu-note><span class="note">Note</span>
      <p>Unlike function instances, the object that is the value of the an AsyncGeneratorFunction's <code>prototype</code> property does not have a <code>constructor</code> property whose value is the AsyncGeneratorFunction instance.</p>
    </emu-note>
  </emu-clause>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause sec="sec-asyncgenerator-objects">
  <h1><span class="secnum">7</span>AsyncGenerator Objects<span class="utils"><span class="anchor"><a href="#">#</a></span></span></h1>
  <emu-import href="./async-generator-objects.html"><p>An AsyncGenerator object is an instance of an async generator function and conforms to both the AsyncIterator and AsyncIterable interfaces.</p>

<p>AsyncGenerator instances directly inherit properties from the object that is the value of the <code>prototype</code> property of the AsyncGenerator function that created the instance. AsyncGenerator instances indirectly inherit properties from the AsyncGenerator Prototype intrinsic, %AsyncGeneratorPrototype%.</p>

<emu-clause id="sec-properties-of-asyncgenerator-prototype">
  <h1><span class="secnum">7.1</span>Properties of AsyncGenerator Prototype<span class="utils"><span class="anchor"><a href="#sec-properties-of-asyncgenerator-prototype">#</a></span></span></h1>
  <p>The AsyncGenerator prototype object is the %AsyncGeneratorPrototype% intrinsic. It is also the initial value of the <code>prototype</code> property of the %AsyncGenerator% intrinsic (the AsyncGeneratorFunction.prototype).</p>
  <p>The AsyncGenerator prototype is an ordinary object. It is not an AsyncGenerator instance and does not have an [[AsyncGeneratorState]] internal slot.</p>
  <p>The value of the [[Prototype]] internal slot of the AsyncGenerator prototype object is the intrinsic object %AsyncIteratorPrototype%. The initial value of the [[Extensible]] internal slot of the AsyncGenerator prototype object is <emu-val>true</emu-val>.</p>
  <p>All AsyncGenerator instances indirectly inherit properties of the AsyncGenerator prototype object.</p>

  <emu-clause id="sec-asyncgenerator-prototype-constructor">
    <h1><span class="secnum">7.1.1</span>AsyncGenerator.prototype.constructor<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-prototype-constructor">#</a></span></span></h1>
    <p>The initial value of <code>AsyncGenerator.prototype.constructor</code> is the intrinsic object %AsyncGenerator%.</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
  </emu-clause>

  <emu-clause id="sec-asyncgenerator-prototype-next">
    <h1><span class="secnum">7.1.2</span>AsyncGenerator.prototype.next ( <var>value</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-prototype-next">#</a></span></span></h1>
    <emu-alg><ol><li>Let <var>generator</var> be the <code>this</code> value.</li><li>Let <var>completion</var> be <emu-xref aoid="NormalCompletion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>value</var>).</li><li>Return ? <emu-xref aoid="AsyncGeneratorEnqueue"><a href="#sec-asyncgeneratorenqueue">AsyncGeneratorEnqueue</a></emu-xref>(<var>generator</var>, <var>completion</var>).
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="sec-asyncgenerator-prototype-return">
    <h1><span class="secnum">7.1.3</span>AsyncGenerator.prototype.return ( <var>value</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-prototype-return">#</a></span></span></h1>
    <emu-alg><ol><li>Let <var>generator</var> be the <code>this</code> value.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>return</emu-const>, [[value]]: <var>value</var>, [[target]]: <emu-const>empty</emu-const>}.</li><li>Return ? <emu-xref aoid="AsyncGeneratorEnqueue"><a href="#sec-asyncgeneratorenqueue">AsyncGeneratorEnqueue</a></emu-xref>(<var>generator</var>, <var>completion</var>).
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="sec-asyncgenerator-prototype-throw">
    <h1><span class="secnum">7.1.4</span>AsyncGenerator.prototype.throw ( <var>exception</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-prototype-throw">#</a></span></span></h1>
    <emu-alg><ol><li>Let <var>generator</var> be the <code>this</code> value.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>throw</emu-const>, [[value]]: <var>exception</var>, [[target]]: <emu-const>empty</emu-const>}.</li><li>Return ? <emu-xref aoid="AsyncGeneratorEnqueue"><a href="#sec-asyncgeneratorenqueue">AsyncGeneratorEnqueue</a></emu-xref>(<var>generator</var>, <var>completion</var>).
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="sec-asyncgenerator-prototype-tostringtag">
    <h1><span class="secnum">7.1.5</span>AsyncGenerator.prototype [ @@toStringTag ]<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-prototype-tostringtag">#</a></span></span></h1>
    <p>The initial value of the @@toStringTag property is the String value <code>"AsyncGenerator"</code>.</p>
    <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
  </emu-clause>

</emu-clause>

<emu-clause id="sec-properties-of-asyncgenerator-intances">
  <h1><span class="secnum">7.2</span>Properties of AsyncGenerator Instances<span class="utils"><span class="anchor"><a href="#sec-properties-of-asyncgenerator-intances">#</a></span></span></h1>
  <p>AsyncGenerator instances are initially created with the internal slots described below:</p>
  <emu-table caption="Internal Slots of AsyncGenerator Instances"><figure><figcaption>Table 4: Internal Slots of AsyncGenerator Instances</figcaption>
    <table>
      <tbody>
      <tr>
        <th>Internal Slot</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>[[AsyncGeneratorState]]</td>
        <td>The current execution state of the async generator. The possible values are: <emu-val>undefined</emu-val>, <code>"suspendedStart"</code>, <code>"suspendedYield"</code>, <code>"executing"</code>, and <code>"completed"</code>.</td>
      </tr>
      <tr>
        <td>[[AsyncGeneratorContext]]</td>
        <td>The <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> that is used when executing the code of this async generator.</td>
      </tr>
      <tr>
        <td>[[AsyncGeneratorQueue]]</td>
        <td>A <emu-xref href="#sec-list-and-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-list-and-record-specification-type">List</a></emu-xref> of AsyncGeneratorRequest records which represent requests to resume the async generator.</td>
      </tr>
      </tbody>
    </table>
  </figure></emu-table>
</emu-clause>

<emu-clause id="sec-asyncgenerator-abstract-operations">
  <h1><span class="secnum">7.3</span>AsyncGenerator Abstract Operations<span class="utils"><span class="anchor"><a href="#sec-asyncgenerator-abstract-operations">#</a></span></span></h1>
  <emu-import href="./abstract-operations.html"><emu-clause id="sec-asyncgeneratorfunctioncreate" aoid="AsyncGeneratorFunctionCreate">
  <h1><span class="secnum">7.3.1</span>AsyncGeneratorFunctionCreate (<var>kind</var>, <var>ParameterList</var>, <var>Body</var>, <var>Scope</var>, <var>Strict</var>)<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfunctioncreate">#</a></span></span></h1>
  <p>The abstract operation AsyncGeneratorFunctionCreate requires the arguments: <var>kind</var> which is one of (<emu-const>Normal</emu-const>, <emu-const>Method</emu-const>), a parameter list production specified by <var>ParameterList</var>, a body production specified by <var>Body</var>, a <emu-xref href="#sec-lexical-environments"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-lexical-environments">Lexical Environment</a></emu-xref> specified by <var>Scope</var>, and a Boolean flag <var>Strict</var>. AsyncGeneratorFunctionCreate performs the following steps:</p>
  <emu-alg><ol><li>Let <var>functionPrototype</var> be the intrinsic object %AsyncGenerator%.</li><li>Let <var>F</var> be <emu-xref aoid="FunctionAllocate"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-functionallocate">FunctionAllocate</a></emu-xref>(<var>functionPrototype</var>, <var>Strict</var>, <code>"generator"</code>).</li><li>Return <emu-xref aoid="FunctionInitialize"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-functioninitialize">FunctionInitialize</a></emu-xref>(<var>F</var>, <var>kind</var>, <var>ParameterList</var>, <var>Body</var>, <var>Scope</var>).
  </li></ol></emu-alg>
  <emu-note><span class="note">Note</span>
    <p>This abstract operation belongs under section 9.2 (ECMAScript Function Objects).</p>
  </emu-note>
</emu-clause>

<emu-clause id="sec=asyncgeneratorrequest-records">
  <h1><span class="secnum">7.3.2</span>AsyncGeneratorRequest Records<span class="utils"><span class="anchor"><a href="#sec=asyncgeneratorrequest-records">#</a></span></span></h1>
  <p>The AsyncGeneratorRequest is a Record value used to store information about how an async generator should be resumed and contains capabilities for fulfilling or rejecting the corresponding promise.</p>
  <p>They have the following fields:</p>
  <emu-table caption="AsyncGeneratorRequest Record Fields"><figure><figcaption>Table 5: AsyncGeneratorRequest Record Fields</figcaption>
    <table>
      <tbody>
      <tr>
        <th>Field Name</th>
        <th>Value</th>
        <th>Meaning</th>
      </tr>
      <tr>
        <td>[[Completion]]</td>
        <td>A <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref> record</td>
        <td>The completion which should be used to resume the async generator.</td>
      </tr>
      <tr>
        <td>[[Capability]]</td>
        <td>A PromiseCapability record</td>
        <td>The promise capabilities associated with this request.</td>
      </tr>
      </tbody>
    </table>
  </figure></emu-table>
</emu-clause>

<emu-clause id="sec-getgeneratorcontextkind" aoid="GetGeneratorContextKind">
  <h1><span class="secnum">7.3.3</span>GetGeneratorContextKind<span class="utils"><span class="anchor"><a href="#sec-getgeneratorcontextkind">#</a></span></span></h1>
  <emu-alg><ol><li>Let <var>genContext</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Assert: <var>genContext</var> has a Generator component.</li><li>Let <var>generator</var> be the Generator component of <var>genContext</var>.</li><li>If <var>generator</var> has an [[AsyncGeneratorState]] internal slot, return <emu-const>async</emu-const>.</li><li>Else, return <emu-const>normal</emu-const>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-asyncgeneratorstart" aoid="AsyncGeneratorStart">
  <h1><span class="secnum">7.3.4</span>AsyncGeneratorStart ( <var>generator</var>, <var>generatorBody</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorstart">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>generator</var> is an AsyncGenerator instance.</li><li>Assert: The value of the [[AsyncGeneratorState]] internal slot of <var>generator</var> is <emu-val>undefined</emu-val>.</li><li>Let <var>genContext</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Set the Generator component of <var>genContext</var> to <var>generator</var>.</li><li>Set the code evaluation state of <var>genContext</var> such that when evaluation is resumed for that <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> the following steps will be performed:<ol><li>Let <var>result</var> be the result of evaluating <var>generatorBody</var>.</li><li>Assert: If we return here, the async generator either threw an exception or performed either an implicit or explicit return.</li><li>Remove <var>genContext</var> from the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> stack and restore the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> that is at the top of the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> stack as the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Set <var>generator</var>'s [[AsyncGeneratorState]] internal slot to <code>"completed"</code>.</li><li>If <var>result</var> is a normal completion, then<ol><li>Let <var>resultValue</var> be <emu-val>undefined</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>resultValue</var> be <var>result</var>.[[value]].</li><li>If <var>result</var>.[[type]] is not <emu-const>return</emu-const>, then<ol><li>Return ! <emu-xref aoid="AsyncGeneratorReject"><a href="#sec-asyncgeneratorreject">AsyncGeneratorReject</a></emu-xref>(<var>generator</var>, <var>resultValue</var>).</li></ol></li></ol></li><li>Let <var>result</var> be AsyncFunctionAwait(<var>resultValue</var>).</li><li>Let <var>resultValue</var> be <var>result</var>.[[value]].</li><li>If <var>result</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Return ! <emu-xref aoid="AsyncGeneratorReject"><a href="#sec-asyncgeneratorreject">AsyncGeneratorReject</a></emu-xref>(<var>generator</var>, <var>resultValue</var>).</li></ol></li><li>Return ! <emu-xref aoid="AsyncGeneratorFulfill"><a href="#sec-asyncgeneratorfulfill">AsyncGeneratorFulfill</a></emu-xref>(<var>generator</var>, <emu-xref aoid="CreateIterResultObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>resultValue</var>, <emu-val>true</emu-val>)).</li></ol></li><li>Set <var>generator</var>'s [[AsyncGeneratorContext]] internal slot to <var>genContext</var>.</li><li>Set <var>generator</var>'s [[AsyncGeneratorState]] internal slot to <code>"suspendedStart"</code>.</li><li>Set <var>generator</var>'s [[AsyncGeneratorQueue]] internal slot to a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Return <emu-val>undefined</emu-val>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-asyncgeneratorfulfill" aoid="AsyncGeneratorFulfill">
  <h1><span class="secnum">7.3.5</span>AsyncGeneratorFulfill ( <var>generator</var>, <var>iteratorResult</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorfulfill">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>generator</var> is an AsyncGenerator instance.</li><li>Assert: <var>iteratorResult</var> is an Object that implements the IteratorResult interface.</li><li>Let <var>queue</var> be the value of the [[AsyncGeneratorQueue]] internal slot of <var>generator</var>.</li><li>Remove the first element from <var>queue</var> and let <var>next</var> be the value of that element.</li><li>Let <var>capability</var> be <var>next</var>.[[Capability]].</li><li>Perform ! <emu-xref aoid="Call"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-call">Call</a></emu-xref>(<var>capability</var>.[[Resolve]], <emu-val>undefined</emu-val>, « <var>iteratorResult</var> »).</li><li>Perform ! <emu-xref aoid="AsyncGeneratorResumeNext"><a href="#sec-asyncgeneratorresumenext">AsyncGeneratorResumeNext</a></emu-xref>(<var>generator</var>).</li><li>Return <emu-val>undefined</emu-val>.
  </li></ol></emu-alg></emu-clause>


<emu-clause id="sec-asyncgeneratorreject" aoid="AsyncGeneratorReject">
  <h1><span class="secnum">7.3.6</span>AsyncGeneratorReject ( <var>generator</var>, <var>exception</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorreject">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>generator</var> is an AsyncGenerator instance.</li><li>Let <var>queue</var> be the value of the [[AsyncGeneratorQueue]] internal slot of <var>generator</var>.</li><li>Remove the first element from <var>queue</var> and let <var>next</var> be the value of that element.</li><li>Let <var>capability</var> be <var>next</var>.[[Capability]].</li><li>Perform ! <emu-xref aoid="Call"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-call">Call</a></emu-xref>(<var>capability</var>.[[Reject]], <emu-val>undefined</emu-val>, « <var>exception</var> »).</li><li>Perform ! <emu-xref aoid="AsyncGeneratorResumeNext"><a href="#sec-asyncgeneratorresumenext">AsyncGeneratorResumeNext</a></emu-xref>(<var>generator</var>).</li><li>Return <emu-val>undefined</emu-val>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-asyncgeneratorresumenext" aoid="AsyncGeneratorResumeNext">
  <h1><span class="secnum">7.3.7</span>AsyncGeneratorResumeNext ( <var>generator</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorresumenext">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>generator</var> is an AsyncGenerator instance.</li><li>Let <var>state</var> be the value of <var>generator</var>'s [[AsyncGeneratorState]] internal slot.</li><li>Assert: <var>state</var> is not <code>"executing"</code>.</li><li>Let <var>queue</var> be the value of <var>generator</var>'s [[AsyncGeneratorQueue]] internal slot.</li><li>If <var>queue</var> is an empty <emu-xref href="#sec-list-and-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-list-and-record-specification-type">List</a></emu-xref>, return <emu-val>undefined</emu-val>.</li><li>Let <var>next</var> be the value of the first element of <var>queue</var>.</li><li>Assert: <var>next</var> is an AsyncGeneratorRequest record.</li><li>Let <var>completion</var> be <var>next</var>.[[Completion]].</li><li>If <var>completion</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>If <var>state</var> is <code>"suspendedStart"</code>, then<ol><li>Set <var>generator</var>'s [[GeneratorState]] internal slot to <code>"completed"</code>.</li><li>Let <var>state</var> be <code>"completed"</code>.</li></ol></li><li>If <var>state</var> is <code>"completed"</code>, then<ol><li>If <var>completion</var>.[[type]] is <emu-const>return</emu-const>, then<ol><li>Let <var>result</var> be <emu-xref aoid="CreateIterResultObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>completion</var>.[[value]], <emu-val>true</emu-val>).</li><li>Return <emu-xref aoid="AsyncGeneratorFulfill"><a href="#sec-asyncgeneratorfulfill">AsyncGeneratorFulfill</a></emu-xref>(<var>generator</var>, <var>result</var>).</li></ol></li><li>Return <emu-xref aoid="AsyncGeneratorReject"><a href="#sec-asyncgeneratorreject">AsyncGeneratorReject</a></emu-xref>(<var>generator</var>, <var>completion</var>.[[value]]).</li></ol></li></ol></li><li>Else,<ol><li>If <var>state</var> is <code>"completed"</code>, then<ol><li>Return <emu-xref aoid="AsyncGeneratorFulfill"><a href="#sec-asyncgeneratorfulfill">AsyncGeneratorFulfill</a></emu-xref>(<var>generator</var>, <emu-xref aoid="CreateIterResultObject"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<emu-val>undefined</emu-val>, <emu-val>true</emu-val>)).</li></ol></li></ol></li><li>Assert: <var>state</var> is either <code>"suspendedStart"</code> or <code>"suspendedYield"</code>.</li><li>Let <var>genContext</var> be the value of <var>generator</var>'s [[AsyncGeneratorContext]] internal slot.</li><li>Let <var>callerContext</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Suspend <var>callerContext</var>.</li><li>Set <var>generator</var>'s [[AsyncGeneratorState]] internal slot to <code>"executing"</code>.</li><li>Push <var>genContext</var> onto the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> stack; <var>genContext</var> is now the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Resume the suspended evaluation of <var>genContext</var> using <var>completion</var> as the result of the operation that suspended it. Let <var>result</var> be the completion record returned by the resumed computation.</li><li>Assert: <var>result</var> is never an <emu-xref href="#sec-completion-record-specification-type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">abrupt completion</a></emu-xref>.</li><li>Assert: When we return here, <var>genContext</var> has already been removed from the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> stack and <var>callerContext</var> is the currently running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Return <emu-val>undefined</emu-val>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-asyncgeneratorenqueue" aoid="AsyncGeneratorEnqueue">
  <h1><span class="secnum">7.3.8</span>AsyncGeneratorEnqueue ( <var>generator</var>, <var>completion</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratorenqueue">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>completion</var> is a <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref> Record.</li><li>If <emu-xref aoid="Type"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>generator</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>generator</var> does not have an [[AsyncGeneratorState]] internal slot, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>queue</var> be the value of <var>generator</var>'s [[AsyncGeneratorQueue]] internal slot.</li><li>Let <var>capability</var> be ! <emu-xref aoid="NewPromiseCapability"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-newpromisecapability">NewPromiseCapability</a></emu-xref>(%Promise%).</li><li>Let <var>request</var> be AsyncGeneratorRequest{[[Completion]]: <var>completion</var>, [[Capability]]: <var>capability</var>}.</li><li>Append <var>request</var> to the end of <var>queue</var>.</li><li>Let <var>state</var> be the value of <var>generator</var>'s [[AsyncGeneratorState]] internal slot.</li><li>If <var>state</var> is not <code>"executing"</code>, then<ol><li>Perform ! <emu-xref aoid="AsyncGeneratorResumeNext"><a href="#sec-asyncgeneratorresumenext">AsyncGeneratorResumeNext</a></emu-xref>(<var>generator</var>).</li></ol></li><li>Return <emu-xref aoid="NormalCompletion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>capability</var>.[[Promise]]).
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-asyncgeneratoryield" aoid="AsyncGeneratorYield">
  <h1><span class="secnum">7.3.9</span>AsyncGeneratorYield ( <var>iteratorResult</var> )<span class="utils"><span class="anchor"><a href="#sec-asyncgeneratoryield">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>iteratorResult</var> is an Object that implements the IteratorResult interface.</li><li>Let <var>genContext</var> be the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Assert: <var>genContext</var> is the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> of an async generator.</li><li>Let <var>generator</var> be the value of the Generator component of <var>genContext</var>.</li><li>Set the value of <var>generator</var>'s [[AsyncGeneratorState]] internal slot to <code>"suspendedYield"</code>.</li><li>Remove <var>genContext</var> from the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> stack and restore the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> that is at the top of the <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref> stack as the running <emu-xref href="#sec-execution-contexts"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Set the code evaluation state of <var>genContext</var> such that when evaluation is resumed with a <emu-xref aoid="Completion"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-completion-record-specification-type">Completion</a></emu-xref> <var>resumptionValue</var> the following steps will be performed:<ol><li>Return <var>resumptionValue</var>.</li><li>NOTE: This returns to the evaluation of the YieldExpression production that originally called this abstract operation.</li></ol></li><li>Perform ! <emu-xref aoid="AsyncGeneratorFulfill"><a href="#sec-asyncgeneratorfulfill">AsyncGeneratorFulfill</a></emu-xref>(<var>generator</var>, <var>iteratorResult</var>).</li><li>Return <emu-val>undefined</emu-val>.</li><li>NOTE: This returns to the evaluation of the operation that had most previously resumed evaluation of <var>genContext</var>.
  </li></ol></emu-alg>
</emu-clause>
</emu-import>
</emu-clause>
</emu-import>
</emu-clause>
</body>